---
title: WindowsFormsHost 元素的布局注意事项
ms.date: 03/30/2017
helpviewer_keywords:
- Windows Forms [WPF], interoperability with
- Windows Forms [WPF], WPF interoperation
- interoperability [WPF], Windows Forms
- WindowsFormsHost element layout considerations [WPF]
- dynamic layout [WPF interoperability]
- device-independent pixels
ms.assetid: 3c574597-bbde-440f-95cc-01371f1a5d9d
ms.openlocfilehash: 5c8a93779141ee061e7bac3dcdfc3fe8b99e2209
ms.sourcegitcommit: 069786bcadbf9cd931d7dc3d892262cd852d2ffb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/19/2021
ms.locfileid: "104665661"
---
# <a name="layout-considerations-for-the-windowsformshost-element"></a><span data-ttu-id="c8e77-102">WindowsFormsHost 元素的布局注意事项</span><span class="sxs-lookup"><span data-stu-id="c8e77-102">Layout Considerations for the WindowsFormsHost Element</span></span>
<span data-ttu-id="c8e77-103">本主题介绍元素如何 <xref:System.Windows.Forms.Integration.WindowsFormsHost> 与 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 布局系统交互。</span><span class="sxs-lookup"><span data-stu-id="c8e77-103">This topic describes how the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element interacts with the [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] layout system.</span></span>  
  
 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="c8e77-104">和 Windows 窗体支持不同但类似的逻辑，用于在窗体或页面上调整和定位元素。</span><span class="sxs-lookup"><span data-stu-id="c8e77-104">and Windows Forms support different, but similar, logic for sizing and positioning elements on a form or page.</span></span> <span data-ttu-id="c8e77-105">当你在中创建 Windows 窗体控件宿主 (UI) 的混合用户界面时 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] ， <xref:System.Windows.Forms.Integration.WindowsFormsHost> 元素将集成两个布局方案。</span><span class="sxs-lookup"><span data-stu-id="c8e77-105">When you create a hybrid user interface (UI) that hosts Windows Forms controls in [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)], the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element integrates the two layout schemes.</span></span>  
  
## <a name="differences-in-layout-between-wpf-and-windows-forms"></a><span data-ttu-id="c8e77-106">WPF 与 Windows 窗体之间的布局差异</span><span class="sxs-lookup"><span data-stu-id="c8e77-106">Differences in Layout Between WPF and Windows Forms</span></span>  
 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="c8e77-107">使用与分辨率无关的布局。</span><span class="sxs-lookup"><span data-stu-id="c8e77-107">uses resolution-independent layout.</span></span> <span data-ttu-id="c8e77-108">所有 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 布局维度均使用 *与设备无关的像素* 来指定。</span><span class="sxs-lookup"><span data-stu-id="c8e77-108">All [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] layout dimensions are specified using *device-independent pixels*.</span></span> <span data-ttu-id="c8e77-109">与设备无关的像素是指大小与分辨率无关的一英寸的 1/6，因此无论是呈现为 72 dpi 监视器还是 19200 dpi 打印机，都可以获得类似的结果。</span><span class="sxs-lookup"><span data-stu-id="c8e77-109">A device-independent pixel is one ninety-sixth of an inch in size and resolution-independent, so you get similar results regardless of whether you are rendering to a 72-dpi monitor or a 19,200-dpi printer.</span></span>  
  
 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="c8e77-110">还基于 *动态布局*。</span><span class="sxs-lookup"><span data-stu-id="c8e77-110">is also based on *dynamic layout*.</span></span> <span data-ttu-id="c8e77-111">这意味着，UI 元素会根据其内容、其父布局容器和可用屏幕大小在窗体或页面上排列自身。</span><span class="sxs-lookup"><span data-stu-id="c8e77-111">This means that a UI element arranges itself on a form or page according to its content, its parent layout container, and the available screen size.</span></span> <span data-ttu-id="c8e77-112">动态布局通过在 UI 元素包含更改长度的字符串时自动调整其大小和位置来简化本地化。</span><span class="sxs-lookup"><span data-stu-id="c8e77-112">Dynamic layout facilitates localization by automatically adjusting the size and position of UI elements when the strings they contain change length.</span></span>  
  
 <span data-ttu-id="c8e77-113">Windows 窗体中的布局取决于设备，并且更有可能是静态的。</span><span class="sxs-lookup"><span data-stu-id="c8e77-113">Layout in Windows Forms is device-dependent and more likely to be static.</span></span> <span data-ttu-id="c8e77-114">通常，Windows 窗体控件在窗体上绝对定位在硬件像素中指定的维度。</span><span class="sxs-lookup"><span data-stu-id="c8e77-114">Typically, Windows Forms controls are positioned absolutely on a form using dimensions specified in hardware pixels.</span></span> <span data-ttu-id="c8e77-115">不过，Windows 窗体支持一些动态布局功能，如下表所示。</span><span class="sxs-lookup"><span data-stu-id="c8e77-115">However, Windows Forms does support some dynamic layout features, as summarized in the following table.</span></span>  
  
|<span data-ttu-id="c8e77-116">布局功能</span><span class="sxs-lookup"><span data-stu-id="c8e77-116">Layout feature</span></span>|<span data-ttu-id="c8e77-117">说明</span><span class="sxs-lookup"><span data-stu-id="c8e77-117">Description</span></span>|  
|--------------------|-----------------|  
|<span data-ttu-id="c8e77-118">自动调整</span><span class="sxs-lookup"><span data-stu-id="c8e77-118">Autosizing</span></span>|<span data-ttu-id="c8e77-119">某些 Windows 窗体控件调整其大小以正确显示其内容。</span><span class="sxs-lookup"><span data-stu-id="c8e77-119">Some Windows Forms controls resize themselves to display their contents properly.</span></span> <span data-ttu-id="c8e77-120">有关详细信息，请参阅 [AutoSize 属性概述](/dotnet/framework/winforms/controls/autosize-property-overview)。</span><span class="sxs-lookup"><span data-stu-id="c8e77-120">For more information, see [AutoSize Property Overview](/dotnet/framework/winforms/controls/autosize-property-overview).</span></span>|  
|<span data-ttu-id="c8e77-121">锚定和停靠</span><span class="sxs-lookup"><span data-stu-id="c8e77-121">Anchoring and docking</span></span>|<span data-ttu-id="c8e77-122">Windows 窗体控件支持根据父容器定位和调整大小。</span><span class="sxs-lookup"><span data-stu-id="c8e77-122">Windows Forms controls support positioning and sizing based on the parent container.</span></span> <span data-ttu-id="c8e77-123">有关详细信息，请参阅 <xref:System.Windows.Forms.Control.Anchor%2A?displayProperty=nameWithType> 和 <xref:System.Windows.Forms.Control.Dock%2A?displayProperty=nameWithType>。</span><span class="sxs-lookup"><span data-stu-id="c8e77-123">For more information, see <xref:System.Windows.Forms.Control.Anchor%2A?displayProperty=nameWithType> and <xref:System.Windows.Forms.Control.Dock%2A?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="c8e77-124">自动缩放</span><span class="sxs-lookup"><span data-stu-id="c8e77-124">Autoscaling</span></span>|<span data-ttu-id="c8e77-125">容器控件根据输出设备的分辨率或默认容器字体的大小（以像素为单位）调整自身及其子控件的大小。</span><span class="sxs-lookup"><span data-stu-id="c8e77-125">Container controls resize themselves and their children based on the resolution of the output device or the size, in pixels, of the default container font.</span></span> <span data-ttu-id="c8e77-126">有关详细信息，请参阅 [Windows 窗体中的自动缩放](/dotnet/framework/winforms/automatic-scaling-in-windows-forms)。</span><span class="sxs-lookup"><span data-stu-id="c8e77-126">For more information, see [Automatic Scaling in Windows Forms](/dotnet/framework/winforms/automatic-scaling-in-windows-forms).</span></span>|  
|<span data-ttu-id="c8e77-127">布局容器</span><span class="sxs-lookup"><span data-stu-id="c8e77-127">Layout containers</span></span>|<span data-ttu-id="c8e77-128"><xref:System.Windows.Forms.FlowLayoutPanel>和 <xref:System.Windows.Forms.TableLayoutPanel> 控件根据其内容排列子控件并调整其大小。</span><span class="sxs-lookup"><span data-stu-id="c8e77-128">The <xref:System.Windows.Forms.FlowLayoutPanel> and <xref:System.Windows.Forms.TableLayoutPanel> controls arrange their child controls and size themselves according to their contents.</span></span>|  
  
## <a name="layout-limitations"></a><span data-ttu-id="c8e77-129">布局限制</span><span class="sxs-lookup"><span data-stu-id="c8e77-129">Layout Limitations</span></span>  
 <span data-ttu-id="c8e77-130">通常情况下，Windows 窗体控件不能缩放并转换为中可能的范围 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="c8e77-130">In general, Windows Forms controls cannot be scaled and transformed to the extent possible in [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="c8e77-131">下面的列表介绍当 <xref:System.Windows.Forms.Integration.WindowsFormsHost> 元素尝试将其承载 Windows 窗体控件集成到布局系统中时的已知限制 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="c8e77-131">The following list describes the known limitations when the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element attempts to integrate its hosted Windows Forms control into the [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] layout system.</span></span>  
  
- <span data-ttu-id="c8e77-132">在某些情况下，不能调整 Windows 窗体控件的大小，也不能仅调整到特定尺寸。</span><span class="sxs-lookup"><span data-stu-id="c8e77-132">In some cases, Windows Forms controls cannot be resized, or can be sized only to specific dimensions.</span></span> <span data-ttu-id="c8e77-133">例如，Windows 窗体 <xref:System.Windows.Forms.ComboBox> 控件仅支持通过控件的字号定义的单个高度。</span><span class="sxs-lookup"><span data-stu-id="c8e77-133">For example, a Windows Forms <xref:System.Windows.Forms.ComboBox> control supports only a single height, which is defined by the control's font size.</span></span> <span data-ttu-id="c8e77-134">在 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 元素可垂直拉伸的动态布局中，承载的 <xref:System.Windows.Forms.ComboBox> 控件不会按预期拉伸。</span><span class="sxs-lookup"><span data-stu-id="c8e77-134">In a [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] dynamic layout where elements can stretch vertically, a hosted <xref:System.Windows.Forms.ComboBox> control will not stretch as expected.</span></span>  
  
- <span data-ttu-id="c8e77-135">不能旋转或倾斜 Windows 窗体控件。</span><span class="sxs-lookup"><span data-stu-id="c8e77-135">Windows Forms controls cannot be rotated or skewed.</span></span> <span data-ttu-id="c8e77-136"><xref:System.Windows.Forms.Integration.WindowsFormsHost> <xref:System.Windows.Forms.Integration.WindowsFormsHost.LayoutError> 如果应用了倾斜或旋转变换，则元素会引发事件。</span><span class="sxs-lookup"><span data-stu-id="c8e77-136">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element raises the <xref:System.Windows.Forms.Integration.WindowsFormsHost.LayoutError> event if you apply a skew or rotation transformation.</span></span> <span data-ttu-id="c8e77-137">如果不处理该 <xref:System.Windows.Forms.Integration.WindowsFormsHost.LayoutError> 事件， <xref:System.InvalidOperationException> 则会引发。</span><span class="sxs-lookup"><span data-stu-id="c8e77-137">If you do not handle the <xref:System.Windows.Forms.Integration.WindowsFormsHost.LayoutError> event, an <xref:System.InvalidOperationException> is raised.</span></span>  
  
- <span data-ttu-id="c8e77-138">在大多数情况下，Windows 窗体控件不支持按比例缩放。</span><span class="sxs-lookup"><span data-stu-id="c8e77-138">In most cases, Windows Forms controls do not support proportional scaling.</span></span> <span data-ttu-id="c8e77-139">尽管该控件的整体尺寸将会缩放，但其子控件和组件元素可能不会按预期调整大小。</span><span class="sxs-lookup"><span data-stu-id="c8e77-139">Although the overall dimensions of the control will scale, child controls and component elements of the control may not resize as expected.</span></span> <span data-ttu-id="c8e77-140">此限制取决于每个 Windows 窗体控件对缩放的支持程度。</span><span class="sxs-lookup"><span data-stu-id="c8e77-140">This limitation depends on how well each Windows Forms control supports scaling.</span></span> <span data-ttu-id="c8e77-141">此外，不能将 Windows 窗体控制缩小到大小为0像素。</span><span class="sxs-lookup"><span data-stu-id="c8e77-141">In addition, you cannot scale Windows Forms controls down to a size of 0 pixels.</span></span>  
  
- <span data-ttu-id="c8e77-142">Windows 窗体控件支持自动缩放，其中窗体将根据字号自动调整自身及其控件的大小。</span><span class="sxs-lookup"><span data-stu-id="c8e77-142">Windows Forms controls support autoscaling, in which the form will automatically resize itself and its controls based on the font size.</span></span> <span data-ttu-id="c8e77-143">在 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 用户界面中，更改字号不会改变整个布局的大小，但是可动态调整单个元素的大小。</span><span class="sxs-lookup"><span data-stu-id="c8e77-143">In a [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] user interface, changing the font size does not resize the entire layout, although individual elements may dynamically resize.</span></span>  
  
### <a name="z-order"></a><span data-ttu-id="c8e77-144">Z 顺序</span><span class="sxs-lookup"><span data-stu-id="c8e77-144">Z-order</span></span>  
 <span data-ttu-id="c8e77-145">在 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 用户界面中，可以更改元素的 z 顺序以控制重叠行为。</span><span class="sxs-lookup"><span data-stu-id="c8e77-145">In a [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] user interface, you can change the z-order of elements to control overlapping behavior.</span></span> <span data-ttu-id="c8e77-146">承载 Windows 窗体控件在单独的 HWND 中绘制，因此始终在元素之上绘制 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="c8e77-146">A hosted Windows Forms control is drawn in a separate HWND, so it is always drawn on top of [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] elements.</span></span>  
  
 <span data-ttu-id="c8e77-147">宿主 Windows 窗体控件也是在任何元素的顶部绘制的 <xref:System.Windows.Documents.Adorner> 。</span><span class="sxs-lookup"><span data-stu-id="c8e77-147">A hosted Windows Forms control is also drawn on top of any <xref:System.Windows.Documents.Adorner> elements.</span></span>  
  
## <a name="layout-behavior"></a><span data-ttu-id="c8e77-148">布局行为</span><span class="sxs-lookup"><span data-stu-id="c8e77-148">Layout Behavior</span></span>  
 <span data-ttu-id="c8e77-149">以下各节介绍了在中承载 Windows 窗体控件时的布局行为的特定方面 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="c8e77-149">The following sections describe specific aspects of layout behavior when hosting Windows Forms controls in [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
### <a name="scaling-unit-conversion-and-device-independence"></a><span data-ttu-id="c8e77-150">缩放、单位转换和设备独立性</span><span class="sxs-lookup"><span data-stu-id="c8e77-150">Scaling, Unit Conversion, and Device Independence</span></span>  
 <span data-ttu-id="c8e77-151">每当 <xref:System.Windows.Forms.Integration.WindowsFormsHost> 元素执行涉及 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 和 Windows 窗体维度的操作时，都涉及两个坐标系统： Windows 窗体的与设备无关的像素 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 和硬件像素。</span><span class="sxs-lookup"><span data-stu-id="c8e77-151">Whenever the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element performs operations involving [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] and Windows Forms dimensions, two coordinate systems are involved: device-independent pixels for [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] and hardware pixels for Windows Forms.</span></span> <span data-ttu-id="c8e77-152">因此，您必须应用适当的单元和缩放转换才能实现一致的布局。</span><span class="sxs-lookup"><span data-stu-id="c8e77-152">Therefore, you must apply proper unit and scaling conversions to achieve a consistent layout.</span></span>  
  
 <span data-ttu-id="c8e77-153">坐标系统之间的转换取决于当前的设备分辨率以及应用于该 <xref:System.Windows.Forms.Integration.WindowsFormsHost> 元素或其上级的任何布局或呈现转换。</span><span class="sxs-lookup"><span data-stu-id="c8e77-153">Conversion between the coordinate systems depends on the current device resolution and any layout or rendering transforms applied to the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element or to its ancestors.</span></span>  
  
 <span data-ttu-id="c8e77-154">如果输出设备为 96 dpi，且未对元素应用缩放，则 <xref:System.Windows.Forms.Integration.WindowsFormsHost> 一个与设备无关的像素等于一个硬件像素。</span><span class="sxs-lookup"><span data-stu-id="c8e77-154">If the output device is 96 dpi and no scaling has been applied to the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element, one device-independent pixel is equal to one hardware pixel.</span></span>  
  
 <span data-ttu-id="c8e77-155">所有其他情况都需要坐标系统缩放。</span><span class="sxs-lookup"><span data-stu-id="c8e77-155">All other cases require coordinate system scaling.</span></span> <span data-ttu-id="c8e77-156">不调整承载的控件的大小。</span><span class="sxs-lookup"><span data-stu-id="c8e77-156">The hosted control is not resized.</span></span> <span data-ttu-id="c8e77-157">相反， <xref:System.Windows.Forms.Integration.WindowsFormsHost> 元素会尝试缩放承载的控件及其所有子控件。</span><span class="sxs-lookup"><span data-stu-id="c8e77-157">Instead, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element attempts to scale the hosted control and all of its child controls.</span></span> <span data-ttu-id="c8e77-158">由于 Windows 窗体不完全支持缩放，因此 <xref:System.Windows.Forms.Integration.WindowsFormsHost> 元素会缩放到特定控件支持的程度。</span><span class="sxs-lookup"><span data-stu-id="c8e77-158">Because Windows Forms does not fully support scaling, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element scales to the degree supported by particular controls.</span></span>  
  
 <span data-ttu-id="c8e77-159">重写 <xref:System.Windows.Forms.Integration.WindowsFormsHost.ScaleChild%2A> 方法以提供承载 Windows 窗体控件的自定义缩放行为。</span><span class="sxs-lookup"><span data-stu-id="c8e77-159">Override the <xref:System.Windows.Forms.Integration.WindowsFormsHost.ScaleChild%2A> method to provide custom scaling behavior for the hosted Windows Forms control.</span></span>  
  
 <span data-ttu-id="c8e77-160">除缩放外，元素还 <xref:System.Windows.Forms.Integration.WindowsFormsHost> 处理舍入和溢出事例，如下表所述。</span><span class="sxs-lookup"><span data-stu-id="c8e77-160">In addition to scaling, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element handles rounding and overflow cases as described in the following table.</span></span>  
  
|<span data-ttu-id="c8e77-161">转换问题</span><span class="sxs-lookup"><span data-stu-id="c8e77-161">Conversion issue</span></span>|<span data-ttu-id="c8e77-162">说明</span><span class="sxs-lookup"><span data-stu-id="c8e77-162">Description</span></span>|  
|----------------------|-----------------|  
|<span data-ttu-id="c8e77-163">舍入</span><span class="sxs-lookup"><span data-stu-id="c8e77-163">Rounding</span></span>|[!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="c8e77-164">与设备无关的像素尺寸指定为 `double` ，Windows 窗体硬件像素尺寸指定为 `int` 。</span><span class="sxs-lookup"><span data-stu-id="c8e77-164">device-independent pixel dimensions are specified as `double`, and Windows Forms hardware pixel dimensions are specified as `int`.</span></span> <span data-ttu-id="c8e77-165">在 `double` 基于的维度转换为 `int` 基于的维度时， <xref:System.Windows.Forms.Integration.WindowsFormsHost> 元素使用标准舍入，以便小于0.5 的小数值向下舍入为0。</span><span class="sxs-lookup"><span data-stu-id="c8e77-165">In cases where `double`-based dimensions are converted to `int`-based dimensions, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element uses standard rounding, so that fractional values less than 0.5 are rounded down to 0.</span></span>|  
|<span data-ttu-id="c8e77-166">溢出</span><span class="sxs-lookup"><span data-stu-id="c8e77-166">Overflow</span></span>|<span data-ttu-id="c8e77-167">当 <xref:System.Windows.Forms.Integration.WindowsFormsHost> 元素从值转换 `double` 为 `int` 值时，可能会发生溢出。</span><span class="sxs-lookup"><span data-stu-id="c8e77-167">When the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element converts from `double` values to `int` values, overflow is possible.</span></span> <span data-ttu-id="c8e77-168">大于的值 <xref:System.Int32.MaxValue> 将设置为 <xref:System.Int32.MaxValue> 。</span><span class="sxs-lookup"><span data-stu-id="c8e77-168">Values that are larger than <xref:System.Int32.MaxValue> are set to <xref:System.Int32.MaxValue>.</span></span>|  
  
### <a name="layout-related-properties"></a><span data-ttu-id="c8e77-169">与布局相关的属性</span><span class="sxs-lookup"><span data-stu-id="c8e77-169">Layout-related Properties</span></span>  
 <span data-ttu-id="c8e77-170">用于控制 Windows 窗体控件和元素中的布局行为的属性 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 将由元素进行相应映射 <xref:System.Windows.Forms.Integration.WindowsFormsHost> 。</span><span class="sxs-lookup"><span data-stu-id="c8e77-170">Properties that control layout behavior in Windows Forms controls and [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] elements are mapped appropriately by the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element.</span></span> <span data-ttu-id="c8e77-171">有关详细信息，请参阅 [Windows 窗体和 WPF 属性映射](windows-forms-and-wpf-property-mapping.md)。</span><span class="sxs-lookup"><span data-stu-id="c8e77-171">For more information, see [Windows Forms and WPF Property Mapping](windows-forms-and-wpf-property-mapping.md).</span></span>  
  
### <a name="layout-changes-in-the-hosted-control"></a><span data-ttu-id="c8e77-172">寄宿控件中的布局更改</span><span class="sxs-lookup"><span data-stu-id="c8e77-172">Layout Changes in the Hosted Control</span></span>  
 <span data-ttu-id="c8e77-173">承载 Windows 窗体控件中的布局更改将传播到 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 以触发布局更新。</span><span class="sxs-lookup"><span data-stu-id="c8e77-173">Layout changes in the hosted Windows Forms control are propagated to [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] to trigger layout updates.</span></span> <span data-ttu-id="c8e77-174"><xref:System.Windows.UIElement.InvalidateMeasure%2A>上的方法 <xref:System.Windows.Forms.Integration.WindowsFormsHost> 可确保寄宿控件中的布局更改会导致 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 布局引擎运行。</span><span class="sxs-lookup"><span data-stu-id="c8e77-174">The <xref:System.Windows.UIElement.InvalidateMeasure%2A> method on <xref:System.Windows.Forms.Integration.WindowsFormsHost> ensures that layout changes in the hosted control cause the [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] layout engine to run.</span></span>  
  
### <a name="continuously-sized-windows-forms-controls"></a><span data-ttu-id="c8e77-175">持续调整 Windows 窗体控件大小</span><span class="sxs-lookup"><span data-stu-id="c8e77-175">Continuously Sized Windows Forms Controls</span></span>  
 <span data-ttu-id="c8e77-176">支持连续缩放的 Windows 窗体控件完全与 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 布局系统交互。</span><span class="sxs-lookup"><span data-stu-id="c8e77-176">Windows Forms controls that support continuous scaling fully interact with the [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] layout system.</span></span> <span data-ttu-id="c8e77-177"><xref:System.Windows.Forms.Integration.WindowsFormsHost>元素使用 <xref:System.Windows.FrameworkElement.MeasureOverride%2A> 和 <xref:System.Windows.FrameworkElement.ArrangeOverride%2A> 方法照常使用和方法来调整承载 Windows 窗体控件的大小和顺序。</span><span class="sxs-lookup"><span data-stu-id="c8e77-177">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element uses the <xref:System.Windows.FrameworkElement.MeasureOverride%2A> and <xref:System.Windows.FrameworkElement.ArrangeOverride%2A> methods as usual to size and arrange the hosted Windows Forms control.</span></span>  
  
### <a name="sizing-algorithm"></a><span data-ttu-id="c8e77-178">大小调整算法</span><span class="sxs-lookup"><span data-stu-id="c8e77-178">Sizing Algorithm</span></span>  
 <span data-ttu-id="c8e77-179"><xref:System.Windows.Forms.Integration.WindowsFormsHost>元素使用以下过程来调整托管控件的大小：</span><span class="sxs-lookup"><span data-stu-id="c8e77-179">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element uses the following procedure to size the hosted control:</span></span>  
  
1. <span data-ttu-id="c8e77-180"><xref:System.Windows.Forms.Integration.WindowsFormsHost>元素重写 <xref:System.Windows.FrameworkElement.MeasureOverride%2A> 和 <xref:System.Windows.FrameworkElement.ArrangeOverride%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="c8e77-180">The <xref:System.Windows.Forms.Integration.WindowsFormsHost> element overrides the <xref:System.Windows.FrameworkElement.MeasureOverride%2A> and <xref:System.Windows.FrameworkElement.ArrangeOverride%2A> methods.</span></span>  
  
2. <span data-ttu-id="c8e77-181">若要确定承载的控件的大小，该 <xref:System.Windows.FrameworkElement.MeasureOverride%2A> 方法将 <xref:System.Windows.Forms.Control.GetPreferredSize%2A> 使用从传递给该方法的约束转换的约束来调用托管控件的方法 <xref:System.Windows.FrameworkElement.MeasureOverride%2A> 。</span><span class="sxs-lookup"><span data-stu-id="c8e77-181">To determine the size of the hosted control, the <xref:System.Windows.FrameworkElement.MeasureOverride%2A> method calls the hosted control's <xref:System.Windows.Forms.Control.GetPreferredSize%2A> method with a constraint translated from the constraint passed to the <xref:System.Windows.FrameworkElement.MeasureOverride%2A> method.</span></span>  
  
3. <span data-ttu-id="c8e77-182"><xref:System.Windows.FrameworkElement.ArrangeOverride%2A>方法尝试将承载的控件设置为给定的大小约束。</span><span class="sxs-lookup"><span data-stu-id="c8e77-182">The <xref:System.Windows.FrameworkElement.ArrangeOverride%2A> method attempts to set the hosted control to the given size constraint.</span></span>  
  
4. <span data-ttu-id="c8e77-183">如果承载的控件的 <xref:System.Windows.Forms.Control.Size%2A> 属性与指定的约束相匹配，则承载的控件将调整为约束的大小。</span><span class="sxs-lookup"><span data-stu-id="c8e77-183">If the hosted control's <xref:System.Windows.Forms.Control.Size%2A> property matches the specified constraint, the hosted control is sized to the constraint.</span></span>  
  
 <span data-ttu-id="c8e77-184">如果该 <xref:System.Windows.Forms.Control.Size%2A> 属性与指定的约束不匹配，则承载的控件不支持连续调整大小。</span><span class="sxs-lookup"><span data-stu-id="c8e77-184">If the <xref:System.Windows.Forms.Control.Size%2A> property does not match the specified constraint, the hosted control does not support continuous sizing.</span></span> <span data-ttu-id="c8e77-185">例如， <xref:System.Windows.Forms.MonthCalendar> 控件仅允许离散大小。</span><span class="sxs-lookup"><span data-stu-id="c8e77-185">For example, the <xref:System.Windows.Forms.MonthCalendar> control allows only discrete sizes.</span></span> <span data-ttu-id="c8e77-186">此控件的允许大小包含整数 (表示高度和宽度) 的月份数。</span><span class="sxs-lookup"><span data-stu-id="c8e77-186">The permitted sizes for this control consist of integers (representing the number of months) for both height and width.</span></span> <span data-ttu-id="c8e77-187">在这种情况下， <xref:System.Windows.Forms.Integration.WindowsFormsHost> 元素的行为如下所示：</span><span class="sxs-lookup"><span data-stu-id="c8e77-187">In cases such as this, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element behaves as follows:</span></span>  
  
- <span data-ttu-id="c8e77-188">如果 <xref:System.Windows.Forms.Control.Size%2A> 属性返回的大小比指定的约束大，则 <xref:System.Windows.Forms.Integration.WindowsFormsHost> 元素会剪辑承载的控件。</span><span class="sxs-lookup"><span data-stu-id="c8e77-188">If the <xref:System.Windows.Forms.Control.Size%2A> property returns a larger size than the specified constraint, the <xref:System.Windows.Forms.Integration.WindowsFormsHost> element clips the hosted control.</span></span> <span data-ttu-id="c8e77-189">高度和宽度是单独处理的，因此可能会在任一方向上剪裁托管控件。</span><span class="sxs-lookup"><span data-stu-id="c8e77-189">Height and width are handled separately, so the hosted control may be clipped in either direction.</span></span>  
  
- <span data-ttu-id="c8e77-190">如果 <xref:System.Windows.Forms.Control.Size%2A> 属性返回的大小小于指定的约束，则 <xref:System.Windows.Forms.Integration.WindowsFormsHost> 接受此大小值，并将值返回到 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 布局系统。</span><span class="sxs-lookup"><span data-stu-id="c8e77-190">If the <xref:System.Windows.Forms.Control.Size%2A> property returns a smaller size than the specified constraint, <xref:System.Windows.Forms.Integration.WindowsFormsHost> accepts this size value and returns the value to the [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] layout system.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c8e77-191">请参阅</span><span class="sxs-lookup"><span data-stu-id="c8e77-191">See also</span></span>

- <xref:System.Windows.Forms.Integration.ElementHost>
- <xref:System.Windows.Forms.Integration.WindowsFormsHost>
- [<span data-ttu-id="c8e77-192">演练：在 WPF 中排列 Windows 窗体控件</span><span class="sxs-lookup"><span data-stu-id="c8e77-192">Walkthrough: Arranging Windows Forms Controls in WPF</span></span>](walkthrough-arranging-windows-forms-controls-in-wpf.md)
- [<span data-ttu-id="c8e77-193">有关在 WPF 中排列 Windows 窗体控件的示例</span><span class="sxs-lookup"><span data-stu-id="c8e77-193">Arranging Windows Forms Controls in WPF Sample</span></span>](https://github.com/microsoft/WPF-Samples/tree/master/Migration%20and%20Interoperability/WpfLayoutHostingWfWithXaml)
- [<span data-ttu-id="c8e77-194">Windows 窗体和 WPF 属性映射</span><span class="sxs-lookup"><span data-stu-id="c8e77-194">Windows Forms and WPF Property Mapping</span></span>](windows-forms-and-wpf-property-mapping.md)
- [<span data-ttu-id="c8e77-195">迁移和互操作性</span><span class="sxs-lookup"><span data-stu-id="c8e77-195">Migration and Interoperability</span></span>](migration-and-interoperability.md)
