---
title: 焦点概述
description: 了解 Windows Presentation Foundation 中与焦点相关的两个主要概念：键盘焦点和逻辑焦点。
ms.date: 03/30/2017
ms.topic: overview
dev_langs:
- csharp
- vb
helpviewer_keywords:
- applications [WPF], focus
- focus in applications [WPF]
ms.assetid: 0230c4eb-0c8a-462b-ac4b-ae3e511659f4
ms.openlocfilehash: 19a8bd38d8e91879e2c8665d4cfe0501e7bac5ab
ms.sourcegitcommit: 069786bcadbf9cd931d7dc3d892262cd852d2ffb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/19/2021
ms.locfileid: "104666038"
---
# <a name="focus-overview"></a><span data-ttu-id="cb0c9-103">焦点概述</span><span class="sxs-lookup"><span data-stu-id="cb0c9-103">Focus Overview</span></span>
<span data-ttu-id="cb0c9-104">在 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 中，有两个与焦点有关的主要概念：键盘焦点和逻辑焦点。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-104">In [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] there are two main concepts that pertain to focus: keyboard focus and logical focus.</span></span>  <span data-ttu-id="cb0c9-105">键盘焦点指接收键盘输入的元素，而逻辑焦点指焦点范围中具有焦点的元素。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-105">Keyboard focus refers to the element that receives keyboard input and logical focus refers to the element in a focus scope that has focus.</span></span>  <span data-ttu-id="cb0c9-106">本概述详细介绍了这些概念。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-106">These concepts are discussed in detail in this overview.</span></span>  <span data-ttu-id="cb0c9-107">对于创建具有多个可获取焦点的区域的复杂应用程序来说，理解这些概念之间的区别非常重要。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-107">Understanding the difference in these concepts is important for creating complex applications that have multiple regions where focus can be obtained.</span></span>  
  
 <span data-ttu-id="cb0c9-108">参与焦点管理的主要类包括 <xref:System.Windows.Input.Keyboard> 类、 <xref:System.Windows.Input.FocusManager> 类和基元素类，如 <xref:System.Windows.UIElement> 和 <xref:System.Windows.ContentElement> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-108">The major classes that participate in focus management are the <xref:System.Windows.Input.Keyboard> class, the <xref:System.Windows.Input.FocusManager> class, and the base element classes, such as <xref:System.Windows.UIElement> and <xref:System.Windows.ContentElement>.</span></span>  <span data-ttu-id="cb0c9-109">有关基元素的详细信息，请参阅[基元素概述](base-elements-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-109">For more information about the base elements, see the [Base Elements Overview](base-elements-overview.md).</span></span>  
  
 <span data-ttu-id="cb0c9-110"><xref:System.Windows.Input.Keyboard>类主要与键盘焦点相关，并 <xref:System.Windows.Input.FocusManager> 主要与逻辑焦点相关，但这并不是绝对差别。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-110">The <xref:System.Windows.Input.Keyboard> class is concerned primarily with keyboard focus and the <xref:System.Windows.Input.FocusManager> is concerned primarily with logical focus, but this is not an absolute distinction.</span></span>  <span data-ttu-id="cb0c9-111">具有键盘焦点的元素也具有逻辑焦点，但具有逻辑焦点的元素不一定具有键盘焦点。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-111">An element that has keyboard focus will also have logical focus, but an element that has logical focus does not necessarily have keyboard focus.</span></span>  <span data-ttu-id="cb0c9-112">当你使用 <xref:System.Windows.Input.Keyboard> 类设置具有键盘焦点的元素时，这会很明显，还可以在元素上设置逻辑焦点。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-112">This is apparent when you use the <xref:System.Windows.Input.Keyboard> class to set the element that has keyboard focus, for it also sets logical focus on the element.</span></span>  

<a name="Keyboard_Focus"></a>
## <a name="keyboard-focus"></a><span data-ttu-id="cb0c9-113">键盘焦点</span><span class="sxs-lookup"><span data-stu-id="cb0c9-113">Keyboard Focus</span></span>  
 <span data-ttu-id="cb0c9-114">键盘焦点指当前正在接收键盘输入的元素。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-114">Keyboard focus refers to the element that is currently receiving keyboard input.</span></span>  <span data-ttu-id="cb0c9-115">在整个桌面上，只能有一个具有键盘焦点的元素。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-115">There can be only one element on the whole desktop that has keyboard focus.</span></span>  <span data-ttu-id="cb0c9-116">在中 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] ，具有键盘焦点的元素将 <xref:System.Windows.IInputElement.IsKeyboardFocused%2A> 设置为 `true` 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-116">In [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)], the element that has keyboard focus will have <xref:System.Windows.IInputElement.IsKeyboardFocused%2A> set to `true`.</span></span>  <span data-ttu-id="cb0c9-117"><xref:System.Windows.Input.Keyboard.FocusedElement%2A>类上的静态属性 <xref:System.Windows.Input.Keyboard> 获取当前具有键盘焦点的元素。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-117">The static property <xref:System.Windows.Input.Keyboard.FocusedElement%2A> on the <xref:System.Windows.Input.Keyboard> class gets the element that currently has keyboard focus.</span></span>  
  
 <span data-ttu-id="cb0c9-118">为了使元素能够获取键盘焦点， <xref:System.Windows.UIElement.Focusable%2A> <xref:System.Windows.UIElement.IsVisible%2A> 基本元素上的和属性必须设置为 `true` 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-118">In order for an element to obtain keyboard focus, the <xref:System.Windows.UIElement.Focusable%2A> and the <xref:System.Windows.UIElement.IsVisible%2A> properties on the base elements must be set to `true`.</span></span>  <span data-ttu-id="cb0c9-119">某些类，如 <xref:System.Windows.Controls.Panel> 基类， <xref:System.Windows.UIElement.Focusable%2A> 默认情况下将设置为 `false` ; 因此， <xref:System.Windows.UIElement.Focusable%2A> `true` 如果希望此类元素能够获取键盘焦点，则必须将设置为。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-119">Some classes, such as the <xref:System.Windows.Controls.Panel> base class, have <xref:System.Windows.UIElement.Focusable%2A> set to `false` by default; therefore, you must set <xref:System.Windows.UIElement.Focusable%2A> to `true` if you want such an element to be able to obtain keyboard focus.</span></span>  
  
 <span data-ttu-id="cb0c9-120">可通过用户与 [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)] 交互（例如，按 Tab 键导航到某个元素或者在某些元素上单击鼠标）来获取键盘焦点。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-120">Keyboard focus can be obtained through user interaction with the [!INCLUDE[TLA2#tla_ui](../../../includes/tla2sharptla-ui-md.md)], such as tabbing to an element or clicking the mouse on certain elements.</span></span>  <span data-ttu-id="cb0c9-121">还可以通过使用类上的方法以编程方式获取键盘焦点 <xref:System.Windows.Input.Keyboard.Focus%2A> <xref:System.Windows.Input.Keyboard> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-121">Keyboard focus can also be obtained programmatically by using the <xref:System.Windows.Input.Keyboard.Focus%2A> method on the <xref:System.Windows.Input.Keyboard> class.</span></span>  <span data-ttu-id="cb0c9-122"><xref:System.Windows.Input.Keyboard.Focus%2A>方法尝试给指定元素的键盘焦点。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-122">The <xref:System.Windows.Input.Keyboard.Focus%2A> method attempts to give the specified element keyboard focus.</span></span>  <span data-ttu-id="cb0c9-123">返回的元素是具有键盘焦点的元素，如果旧的或新的焦点对象阻止请求，则具有键盘焦点的元素可能不是请求的元素。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-123">The returned element is the element that has keyboard focus, which might be a different element than requested if either the old or new focus object block the request.</span></span>  
  
 <span data-ttu-id="cb0c9-124">下面的示例使用 <xref:System.Windows.Input.Keyboard.Focus%2A> 方法将键盘焦点设置在上 <xref:System.Windows.Controls.Button> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-124">The following example uses the <xref:System.Windows.Input.Keyboard.Focus%2A> method to set keyboard focus on a <xref:System.Windows.Controls.Button>.</span></span>  
  
 [!code-csharp[focussample#FocusSampleSetFocus](~/samples/snippets/csharp/VS_Snippets_Wpf/FocusSample/CSharp/Window1.xaml.cs#focussamplesetfocus)]
 [!code-vb[focussample#FocusSampleSetFocus](~/samples/snippets/visualbasic/VS_Snippets_Wpf/FocusSample/visualbasic/window1.xaml.vb#focussamplesetfocus)]  
  
 <span data-ttu-id="cb0c9-125"><xref:System.Windows.UIElement.IsKeyboardFocused%2A>基元素类的属性获取一个值，该值指示元素是否具有键盘焦点。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-125">The <xref:System.Windows.UIElement.IsKeyboardFocused%2A> property on the base element classes gets a value indicating whether the element has keyboard focus.</span></span>  <span data-ttu-id="cb0c9-126"><xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>基元素类的属性获取一个值，该值指示该元素或它的任何一个可视子元素是否具有键盘焦点。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-126">The <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> property on the base element classes gets a value indicating whether the element or any one of its visual child elements has keyboard focus.</span></span>  
  
 <span data-ttu-id="cb0c9-127">在应用程序启动时设置初始焦点时，接收焦点的元素必须位于应用程序加载的初始窗口的可视化树中，并且该元素必须具有 <xref:System.Windows.UIElement.Focusable%2A> 并 <xref:System.Windows.UIElement.IsVisible%2A> 将设置为 `true` 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-127">When setting initial focus at application startup, the element to receive focus must be in the visual tree of the initial window loaded by the application, and the element must have <xref:System.Windows.UIElement.Focusable%2A> and <xref:System.Windows.UIElement.IsVisible%2A> set to `true`.</span></span>  <span data-ttu-id="cb0c9-128">建议在事件处理程序中设置初始焦点 <xref:System.Windows.FrameworkElement.Loaded> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-128">The recommended place to set initial focus is in the <xref:System.Windows.FrameworkElement.Loaded> event handler.</span></span>  <span data-ttu-id="cb0c9-129"><xref:System.Windows.Threading.Dispatcher>还可以通过调用或来使用回调 <xref:System.Windows.Threading.Dispatcher.Invoke%2A> <xref:System.Windows.Threading.Dispatcher.BeginInvoke%2A> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-129">A <xref:System.Windows.Threading.Dispatcher> callback can also be used by calling <xref:System.Windows.Threading.Dispatcher.Invoke%2A> or <xref:System.Windows.Threading.Dispatcher.BeginInvoke%2A>.</span></span>  
  
<a name="Logical_Focus"></a>
## <a name="logical-focus"></a><span data-ttu-id="cb0c9-130">逻辑焦点</span><span class="sxs-lookup"><span data-stu-id="cb0c9-130">Logical Focus</span></span>  
 <span data-ttu-id="cb0c9-131">逻辑焦点引用 <xref:System.Windows.Input.FocusManager.FocusedElement%2A?displayProperty=nameWithType> 焦点范围内的。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-131">Logical focus refers to the <xref:System.Windows.Input.FocusManager.FocusedElement%2A?displayProperty=nameWithType> in a focus scope.</span></span>  <span data-ttu-id="cb0c9-132">焦点作用域是跟踪 <xref:System.Windows.Input.FocusManager.FocusedElement%2A> 其作用域内的的元素。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-132">A focus scope is an element that keeps track of the <xref:System.Windows.Input.FocusManager.FocusedElement%2A> within its scope.</span></span>  <span data-ttu-id="cb0c9-133">键盘焦点离开焦点范围时，焦点元素会失去键盘焦点，但保留逻辑焦点。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-133">When keyboard focus leaves a focus scope, the focused element will lose keyboard focus but will retain logical focus.</span></span>  <span data-ttu-id="cb0c9-134">键盘焦点返回到焦点范围时，焦点元素会再次获得键盘焦点。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-134">When keyboard focus returns to the focus scope, the focused element will obtain keyboard focus.</span></span>  <span data-ttu-id="cb0c9-135">这使得键盘焦点可在多个焦点范围之间切换，但确保了焦点返回到焦点范围时，焦点范围中的焦点元素重新获得键盘焦点。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-135">This allows for keyboard focus to be changed between multiple focus scopes but ensures that the focused element in the focus scope regains keyboard focus when focus returns to the focus scope.</span></span>  
  
 <span data-ttu-id="cb0c9-136">一个应用程序中可以有多个具有逻辑焦点的元素，但在一个特定的焦点范围中只能有一个具有逻辑焦点的元素。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-136">There can be multiple elements that have logical focus in an application, but there may only be one element that has logical focus in a particular focus scope.</span></span>  
  
 <span data-ttu-id="cb0c9-137">具有键盘焦点的元素还具有其所属焦点范围的逻辑焦点。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-137">An element that has keyboard focus has logical focus for the focus scope it belongs to.</span></span>  
  
 <span data-ttu-id="cb0c9-138">[!INCLUDE[TLA#tla_xaml](../../../includes/tlasharptla-xaml-md.md)]通过将 <xref:System.Windows.Input.FocusManager> 附加属性设置 <xref:System.Windows.Input.FocusManager.IsFocusScope%2A> 为，可以在中将元素转换为焦点范围 `true` 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-138">An element can be turned into a focus scope in [!INCLUDE[TLA#tla_xaml](../../../includes/tlasharptla-xaml-md.md)] by setting the <xref:System.Windows.Input.FocusManager> attached property <xref:System.Windows.Input.FocusManager.IsFocusScope%2A> to `true`.</span></span>  <span data-ttu-id="cb0c9-139">在代码中，可以通过调用将元素转换为焦点范围 <xref:System.Windows.Input.FocusManager.SetIsFocusScope%2A> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-139">In code, an element can be turned into a focus scope by calling <xref:System.Windows.Input.FocusManager.SetIsFocusScope%2A>.</span></span>  
  
 <span data-ttu-id="cb0c9-140">下面的示例 <xref:System.Windows.Controls.StackPanel> 通过设置附加属性，使成为焦点范围 <xref:System.Windows.Input.FocusManager.IsFocusScope%2A> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-140">The following example makes a <xref:System.Windows.Controls.StackPanel> into a focus scope by setting the <xref:System.Windows.Input.FocusManager.IsFocusScope%2A> attached property.</span></span>  
  
 [!code-xaml[MarkupSnippets#MarkupIsFocusScopeXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/MarkupSnippets/CSharp/Window1.xaml#markupisfocusscopexaml)]  
  
 [!code-csharp[FocusSnippets#FocusSetIsFocusScope](~/samples/snippets/csharp/VS_Snippets_Wpf/FocusSnippets/CSharp/Window1.xaml.cs#focussetisfocusscope)]
 [!code-vb[FocusSnippets#FocusSetIsFocusScope](~/samples/snippets/visualbasic/VS_Snippets_Wpf/FocusSnippets/visualbasic/window1.xaml.vb#focussetisfocusscope)]  
  
 <span data-ttu-id="cb0c9-141"><xref:System.Windows.Input.FocusManager.GetFocusScope%2A> 返回指定元素的焦点范围。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-141"><xref:System.Windows.Input.FocusManager.GetFocusScope%2A> returns the focus scope for the specified element.</span></span>  
  
 <span data-ttu-id="cb0c9-142">[!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)]默认情况下，焦点范围为、、 <xref:System.Windows.Window> 和的类 <xref:System.Windows.Controls.MenuItem> <xref:System.Windows.Controls.ToolBar> <xref:System.Windows.Controls.ContextMenu> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-142">Classes in [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] which are focus scopes by default are <xref:System.Windows.Window>, <xref:System.Windows.Controls.MenuItem>, <xref:System.Windows.Controls.ToolBar>, and <xref:System.Windows.Controls.ContextMenu>.</span></span>  
  
 <span data-ttu-id="cb0c9-143"><xref:System.Windows.Input.FocusManager.GetFocusedElement%2A> 获取指定焦点范围的聚焦元素。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-143"><xref:System.Windows.Input.FocusManager.GetFocusedElement%2A> gets the focused element for the specified focus scope.</span></span>  <span data-ttu-id="cb0c9-144"><xref:System.Windows.Input.FocusManager.SetFocusedElement%2A> 设置指定焦点范围中的焦点元素。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-144"><xref:System.Windows.Input.FocusManager.SetFocusedElement%2A> sets the focused element in the specified focus scope.</span></span>  <span data-ttu-id="cb0c9-145"><xref:System.Windows.Input.FocusManager.SetFocusedElement%2A> 通常用于设置初始聚焦元素。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-145"><xref:System.Windows.Input.FocusManager.SetFocusedElement%2A> is typically used to set the initial focused element.</span></span>  
  
 <span data-ttu-id="cb0c9-146">以下示例在焦点范围上设置焦点元素并获取焦点范围的焦点元素。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-146">The following example sets the focused element on a focus scope and gets the focused element of a focus scope.</span></span>  
  
 [!code-csharp[FocusSnippets#FocusGetSetFocusedElement](~/samples/snippets/csharp/VS_Snippets_Wpf/FocusSnippets/CSharp/Window1.xaml.cs#focusgetsetfocusedelement)]
 [!code-vb[FocusSnippets#FocusGetSetFocusedElement](~/samples/snippets/visualbasic/VS_Snippets_Wpf/FocusSnippets/visualbasic/window1.xaml.vb#focusgetsetfocusedelement)]  
  
<a name="Keyboard_Navigation"></a>
## <a name="keyboard-navigation"></a><span data-ttu-id="cb0c9-147">键盘导航</span><span class="sxs-lookup"><span data-stu-id="cb0c9-147">Keyboard Navigation</span></span>  
 <span data-ttu-id="cb0c9-148"><xref:System.Windows.Input.KeyboardNavigation>类负责在按下一个导航键时实现默认键盘焦点导航。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-148">The <xref:System.Windows.Input.KeyboardNavigation> class is responsible for implementing default keyboard focus navigation when one of the navigation keys is pressed.</span></span>  <span data-ttu-id="cb0c9-149">导航键包括：Tab、Shift+Tab、Ctrl+Tab、Ctrl+Shift+Tab、向上键、向下键、向左键和向右键。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-149">The navigation keys are: TAB, SHIFT+TAB, CTRL+TAB, CTRL+SHIFT+TAB, UPARROW, DOWNARROW, LEFTARROW, and RIGHTARROW keys.</span></span>  
  
 <span data-ttu-id="cb0c9-150">可以通过设置附加的 <xref:System.Windows.Input.KeyboardNavigation> 属性、和来更改导航容器的导航行为 <xref:System.Windows.Input.KeyboardNavigation.TabNavigation%2A> <xref:System.Windows.Input.KeyboardNavigation.ControlTabNavigation%2A> <xref:System.Windows.Input.KeyboardNavigation.DirectionalNavigation%2A> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-150">The navigation behavior of a navigation container can be changed by setting the attached <xref:System.Windows.Input.KeyboardNavigation> properties <xref:System.Windows.Input.KeyboardNavigation.TabNavigation%2A>, <xref:System.Windows.Input.KeyboardNavigation.ControlTabNavigation%2A>, and <xref:System.Windows.Input.KeyboardNavigation.DirectionalNavigation%2A>.</span></span>  <span data-ttu-id="cb0c9-151">这些属性的类型为 <xref:System.Windows.Input.KeyboardNavigationMode> ，可能的值为 <xref:System.Windows.Input.KeyboardNavigationMode.Continue> 、 <xref:System.Windows.Input.KeyboardNavigationMode.Local> 、 <xref:System.Windows.Input.KeyboardNavigationMode.Contained> 、 <xref:System.Windows.Input.KeyboardNavigationMode.Cycle> 、 <xref:System.Windows.Input.KeyboardNavigationMode.Once> 和 <xref:System.Windows.Input.KeyboardNavigationMode.None> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-151">These properties are of type <xref:System.Windows.Input.KeyboardNavigationMode> and the possible values are <xref:System.Windows.Input.KeyboardNavigationMode.Continue>, <xref:System.Windows.Input.KeyboardNavigationMode.Local>, <xref:System.Windows.Input.KeyboardNavigationMode.Contained>, <xref:System.Windows.Input.KeyboardNavigationMode.Cycle>, <xref:System.Windows.Input.KeyboardNavigationMode.Once>, and <xref:System.Windows.Input.KeyboardNavigationMode.None>.</span></span>  <span data-ttu-id="cb0c9-152">默认值为 <xref:System.Windows.Input.KeyboardNavigationMode.Continue> ，这意味着该元素不是导航容器。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-152">The default value is <xref:System.Windows.Input.KeyboardNavigationMode.Continue>, which means the element is not a navigation container.</span></span>  
  
 <span data-ttu-id="cb0c9-153">下面的示例创建一个 <xref:System.Windows.Controls.Menu> 具有多个 <xref:System.Windows.Controls.MenuItem> 对象的。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-153">The following example creates a <xref:System.Windows.Controls.Menu> with a number of <xref:System.Windows.Controls.MenuItem> objects.</span></span>  <span data-ttu-id="cb0c9-154">在 <xref:System.Windows.Input.KeyboardNavigation.TabNavigation%2A> 上，附加属性设置为 <xref:System.Windows.Input.KeyboardNavigationMode.Cycle> <xref:System.Windows.Controls.Menu> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-154">The <xref:System.Windows.Input.KeyboardNavigation.TabNavigation%2A> attached property is set to <xref:System.Windows.Input.KeyboardNavigationMode.Cycle> on the <xref:System.Windows.Controls.Menu>.</span></span>  <span data-ttu-id="cb0c9-155">当使用中的 tab 键更改焦点时 <xref:System.Windows.Controls.Menu> ，焦点将从每个元素移动，当到达最后一个元素时，焦点将返回到第一个元素。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-155">When focus is changed using the tab key within the <xref:System.Windows.Controls.Menu>, focus will move from each element and when the last element is reached focus will return to the first element.</span></span>  
  
 [!code-xaml[MarkupSnippets#MarkupKeyboardNavigationTabNavigationXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/MarkupSnippets/CSharp/Window1.xaml#markupkeyboardnavigationtabnavigationxaml)]  
  
 [!code-csharp[MarkupSnippets#MarkupKeyboardNavigationTabNavigationCODE](~/samples/snippets/csharp/VS_Snippets_Wpf/MarkupSnippets/CSharp/Window1.xaml.cs#markupkeyboardnavigationtabnavigationcode)]
 [!code-vb[MarkupSnippets#MarkupKeyboardNavigationTabNavigationCODE](~/samples/snippets/visualbasic/VS_Snippets_Wpf/MarkupSnippets/visualbasic/window1.xaml.vb#markupkeyboardnavigationtabnavigationcode)]  
  
<a name="Manipulating_Focus_Programmatically"></a>
## <a name="navigating-focus-programmatically"></a><span data-ttu-id="cb0c9-156">以编程方式导航焦点</span><span class="sxs-lookup"><span data-stu-id="cb0c9-156">Navigating Focus Programmatically</span></span>  
 <span data-ttu-id="cb0c9-157">用于处理焦点的其他 API 为 <xref:System.Windows.UIElement.MoveFocus%2A> 和 <xref:System.Windows.UIElement.PredictFocus%2A> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-157">Additional API to work with focus are <xref:System.Windows.UIElement.MoveFocus%2A> and <xref:System.Windows.UIElement.PredictFocus%2A>.</span></span>  
  
 <span data-ttu-id="cb0c9-158"><xref:System.Windows.FrameworkElement.MoveFocus%2A> 将焦点更改为应用程序中的下一个元素。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-158"><xref:System.Windows.FrameworkElement.MoveFocus%2A> changes focus to the next element in the application.</span></span>  <span data-ttu-id="cb0c9-159"><xref:System.Windows.Input.TraversalRequest>用于指定方向。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-159">A <xref:System.Windows.Input.TraversalRequest> is used to specify the direction.</span></span>   <span data-ttu-id="cb0c9-160"><xref:System.Windows.Input.FocusNavigationDirection>传递的用于 <xref:System.Windows.UIElement.MoveFocus%2A> 指定可以移动的不同方向焦点，如 <xref:System.Windows.Input.FocusNavigationDirection.First> 、 <xref:System.Windows.Input.FocusNavigationDirection.Last> <xref:System.Windows.Input.FocusNavigationDirection.Up> 和 <xref:System.Windows.Input.FocusNavigationDirection.Down> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-160">The <xref:System.Windows.Input.FocusNavigationDirection> passed to <xref:System.Windows.UIElement.MoveFocus%2A> specifies the different directions focus can be moved, such as <xref:System.Windows.Input.FocusNavigationDirection.First>, <xref:System.Windows.Input.FocusNavigationDirection.Last>, <xref:System.Windows.Input.FocusNavigationDirection.Up> and <xref:System.Windows.Input.FocusNavigationDirection.Down>.</span></span>  
  
 <span data-ttu-id="cb0c9-161">下面的示例使用 <xref:System.Windows.FrameworkElement.MoveFocus%2A> 更改焦点元素。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-161">The following example uses <xref:System.Windows.FrameworkElement.MoveFocus%2A> to change the focused element.</span></span>  
  
 [!code-csharp[focussample#FocusSampleMoveFocus](~/samples/snippets/csharp/VS_Snippets_Wpf/FocusSample/CSharp/Window1.xaml.cs#focussamplemovefocus)]
 [!code-vb[focussample#FocusSampleMoveFocus](~/samples/snippets/visualbasic/VS_Snippets_Wpf/FocusSample/visualbasic/window1.xaml.vb#focussamplemovefocus)]  
  
 <span data-ttu-id="cb0c9-162"><xref:System.Windows.FrameworkElement.PredictFocus%2A> 返回当焦点被更改时将接收焦点的对象。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-162"><xref:System.Windows.FrameworkElement.PredictFocus%2A> returns the object which would receive focus if focus were to be changed.</span></span>  <span data-ttu-id="cb0c9-163">目前仅 <xref:System.Windows.Input.FocusNavigationDirection.Up> 支持、 <xref:System.Windows.Input.FocusNavigationDirection.Down> 、 <xref:System.Windows.Input.FocusNavigationDirection.Left> 和 <xref:System.Windows.Input.FocusNavigationDirection.Right> <xref:System.Windows.FrameworkElement.PredictFocus%2A> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-163">Currently, only <xref:System.Windows.Input.FocusNavigationDirection.Up>, <xref:System.Windows.Input.FocusNavigationDirection.Down>, <xref:System.Windows.Input.FocusNavigationDirection.Left>, and <xref:System.Windows.Input.FocusNavigationDirection.Right> are supported by <xref:System.Windows.FrameworkElement.PredictFocus%2A>.</span></span>  
  
<a name="Focus_Events"></a>
## <a name="focus-events"></a><span data-ttu-id="cb0c9-164">焦点事件</span><span class="sxs-lookup"><span data-stu-id="cb0c9-164">Focus Events</span></span>  
 <span data-ttu-id="cb0c9-165">与键盘焦点相关的事件为 <xref:System.Windows.Input.Keyboard.PreviewGotKeyboardFocus> 、 <xref:System.Windows.Input.Keyboard.GotKeyboardFocus> 和 <xref:System.Windows.Input.Keyboard.PreviewLostKeyboardFocus> <xref:System.Windows.Input.Keyboard.LostKeyboardFocus> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-165">The events related to keyboard focus are <xref:System.Windows.Input.Keyboard.PreviewGotKeyboardFocus>, <xref:System.Windows.Input.Keyboard.GotKeyboardFocus> and <xref:System.Windows.Input.Keyboard.PreviewLostKeyboardFocus>, <xref:System.Windows.Input.Keyboard.LostKeyboardFocus>.</span></span>  <span data-ttu-id="cb0c9-166">事件在类上定义为附加事件 <xref:System.Windows.Input.Keyboard> ，但更易于访问，作为基元素类上的等效路由事件。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-166">The events are defined as attached events on the <xref:System.Windows.Input.Keyboard> class, but are more readily accessible as equivalent routed events on the base element classes.</span></span>  <span data-ttu-id="cb0c9-167">有关事件的详细信息，请参阅[路由事件概述](routed-events-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-167">For more information about events, see the [Routed Events Overview](routed-events-overview.md).</span></span>  
  
 <span data-ttu-id="cb0c9-168"><xref:System.Windows.Input.Keyboard.GotKeyboardFocus> 当元素获取键盘焦点时，将引发。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-168"><xref:System.Windows.Input.Keyboard.GotKeyboardFocus> is raised when the element obtains keyboard focus.</span></span>  <span data-ttu-id="cb0c9-169"><xref:System.Windows.Input.Keyboard.LostKeyboardFocus> 当元素失去键盘焦点时引发。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-169"><xref:System.Windows.Input.Keyboard.LostKeyboardFocus> is raised when the element loses keyboard focus.</span></span>  <span data-ttu-id="cb0c9-170">如果 <xref:System.Windows.Input.Keyboard.PreviewGotKeyboardFocus> 处理了事件或 <xref:System.Windows.Input.Keyboard.PreviewLostKeyboardFocusEvent> 事件并且 <xref:System.Windows.RoutedEventArgs.Handled%2A> 将设置为 `true` ，则焦点将不会更改。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-170">If the <xref:System.Windows.Input.Keyboard.PreviewGotKeyboardFocus> event or the <xref:System.Windows.Input.Keyboard.PreviewLostKeyboardFocusEvent> event is handled and <xref:System.Windows.RoutedEventArgs.Handled%2A> is set to `true`, then focus will not change.</span></span>  
  
 <span data-ttu-id="cb0c9-171">下面的示例将 <xref:System.Windows.UIElement.GotKeyboardFocus> 和 <xref:System.Windows.UIElement.LostKeyboardFocus> 事件处理程序附加到 <xref:System.Windows.Controls.TextBox> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-171">The following example attaches <xref:System.Windows.UIElement.GotKeyboardFocus> and <xref:System.Windows.UIElement.LostKeyboardFocus> event handlers to a <xref:System.Windows.Controls.TextBox>.</span></span>  
  
 [!code-xaml[keyboardsample#KeyboardSampleXAMLHandlerHookup](~/samples/snippets/csharp/VS_Snippets_Wpf/KeyboardSample/CSharp/Window1.xaml#keyboardsamplexamlhandlerhookup)]  
  
 <span data-ttu-id="cb0c9-172">当 <xref:System.Windows.Controls.TextBox> 获取键盘焦点时， <xref:System.Windows.Controls.Control.Background%2A> 的属性将 <xref:System.Windows.Controls.TextBox> 更改为 <xref:System.Windows.Media.Brushes.LightBlue%2A> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-172">When the <xref:System.Windows.Controls.TextBox> obtains keyboard focus, the <xref:System.Windows.Controls.Control.Background%2A> property of the <xref:System.Windows.Controls.TextBox> is changed to <xref:System.Windows.Media.Brushes.LightBlue%2A>.</span></span>  
  
 [!code-csharp[keyboardsample#KeyboardSampleGotFocus](~/samples/snippets/csharp/VS_Snippets_Wpf/KeyboardSample/CSharp/Window1.xaml.cs#keyboardsamplegotfocus)]
 [!code-vb[keyboardsample#KeyboardSampleGotFocus](~/samples/snippets/visualbasic/VS_Snippets_Wpf/KeyboardSample/visualbasic/window1.xaml.vb#keyboardsamplegotfocus)]  
  
 <span data-ttu-id="cb0c9-173">当 <xref:System.Windows.Controls.TextBox> 失去键盘焦点时， <xref:System.Windows.Controls.Control.Background%2A> 的属性将 <xref:System.Windows.Controls.TextBox> 改回为白色。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-173">When the <xref:System.Windows.Controls.TextBox> loses keyboard focus, the <xref:System.Windows.Controls.Control.Background%2A> property of the <xref:System.Windows.Controls.TextBox> is changed back to white.</span></span>  
  
 [!code-csharp[keyboardsample#KeyboardSampleLostFocus](~/samples/snippets/csharp/VS_Snippets_Wpf/KeyboardSample/CSharp/Window1.xaml.cs#keyboardsamplelostfocus)]
 [!code-vb[keyboardsample#KeyboardSampleLostFocus](~/samples/snippets/visualbasic/VS_Snippets_Wpf/KeyboardSample/visualbasic/window1.xaml.vb#keyboardsamplelostfocus)]  
  
 <span data-ttu-id="cb0c9-174">与逻辑焦点相关的事件包括 <xref:System.Windows.UIElement.GotFocus> 和 <xref:System.Windows.UIElement.LostFocus> 。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-174">The events related to logical focus are <xref:System.Windows.UIElement.GotFocus> and <xref:System.Windows.UIElement.LostFocus>.</span></span>  <span data-ttu-id="cb0c9-175">这些事件定义 <xref:System.Windows.Input.FocusManager> 为作为附加事件，但不 <xref:System.Windows.Input.FocusManager> 公开 CLR 事件包装。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-175">These events are defined on the <xref:System.Windows.Input.FocusManager> as attached events, but the <xref:System.Windows.Input.FocusManager> does not expose CLR event wrappers.</span></span>  <span data-ttu-id="cb0c9-176"><xref:System.Windows.UIElement> 并 <xref:System.Windows.ContentElement> 更方便地公开这些事件。</span><span class="sxs-lookup"><span data-stu-id="cb0c9-176"><xref:System.Windows.UIElement> and <xref:System.Windows.ContentElement> expose these events more conveniently.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cb0c9-177">请参阅</span><span class="sxs-lookup"><span data-stu-id="cb0c9-177">See also</span></span>

- <xref:System.Windows.Input.FocusManager>
- <xref:System.Windows.UIElement>
- <xref:System.Windows.ContentElement>
- [<span data-ttu-id="cb0c9-178">输入概述</span><span class="sxs-lookup"><span data-stu-id="cb0c9-178">Input Overview</span></span>](input-overview.md)
- [<span data-ttu-id="cb0c9-179">基元素概述</span><span class="sxs-lookup"><span data-stu-id="cb0c9-179">Base Elements Overview</span></span>](base-elements-overview.md)
