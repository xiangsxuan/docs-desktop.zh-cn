---
title: 三维转换概述
ms.date: 03/30/2017
ms.topic: overview
dev_langs:
- csharp
- vb
helpviewer_keywords:
- 3D transformations
- transformations [WPF], 3D
ms.assetid: e45e555d-ac1e-4b36-aced-e433afe7f27f
ms.openlocfilehash: fe6c7061b6cd2f57ace1765c898dac1d1f797cab
ms.sourcegitcommit: bf5dd80f4d7b202afa90e90d1148402c5474d826
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/30/2021
ms.locfileid: "96973786"
---
# <a name="3d-transformations-overview"></a><span data-ttu-id="1fb39-102">三维转换概述</span><span class="sxs-lookup"><span data-stu-id="1fb39-102">3D Transformations Overview</span></span>
<span data-ttu-id="1fb39-103">本主题介绍如何对图形系统中的3D 模型应用转换 [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="1fb39-103">This topic describes how to apply transformations to 3D models in the [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] graphics system.</span></span> <span data-ttu-id="1fb39-104">开发人员可以借助转换功能对模型进行重定位、大小调整和重定向，而无需更改用来定义模型的基值。</span><span class="sxs-lookup"><span data-stu-id="1fb39-104">Transformations allow the developer to reposition, resize, and reorient models without changing the base values that define them.</span></span>  

## <a name="3d-coordinate-space"></a><span data-ttu-id="1fb39-105">三维坐标空间</span><span class="sxs-lookup"><span data-stu-id="1fb39-105">3D Coordinate Space</span></span>  
 <span data-ttu-id="1fb39-106">中的3D 图形内容 [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 封装在一个元素中， <xref:System.Windows.Controls.Viewport3D> 该元素可以参与二维元素结构。</span><span class="sxs-lookup"><span data-stu-id="1fb39-106">3D graphics content in [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] is encapsulated in an element, <xref:System.Windows.Controls.Viewport3D>, that can participate in the two-dimensional element structure.</span></span> <span data-ttu-id="1fb39-107">该图形系统将 Viewport3D 视为一个像 [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 中的许多其他元素一样的二维视觉元素。</span><span class="sxs-lookup"><span data-stu-id="1fb39-107">The graphics system treats Viewport3D as a two-dimensional visual element like many others in [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)].</span></span> <span data-ttu-id="1fb39-108">Viewport3D 充当三维场景中的窗口（即视区）。</span><span class="sxs-lookup"><span data-stu-id="1fb39-108">Viewport3D functions as a window—a viewport—into a three-dimensional scene.</span></span> <span data-ttu-id="1fb39-109">更准确地说，它是一个在其上投影三维场景的图面。</span><span class="sxs-lookup"><span data-stu-id="1fb39-109">More accurately, it is a surface on which a 3D scene is projected.</span></span>  <span data-ttu-id="1fb39-110">虽然您可以将 Viewport3D 用于同一场景图中的其他2D 绘图对象，但您不能在 Viewport3D 中渗透2D 和3D 对象。</span><span class="sxs-lookup"><span data-stu-id="1fb39-110">Although you can use Viewport3D with other 2D drawing objects in the same scene graph, you cannot interpenetrate 2D and 3D objects within a Viewport3D.</span></span> <span data-ttu-id="1fb39-111">以下讨论中所描述的坐标空间包含在 Viewport3D 元素中。</span><span class="sxs-lookup"><span data-stu-id="1fb39-111">In the following discussion, the coordinate space described is contained by the Viewport3D element.</span></span>  
  
 <span data-ttu-id="1fb39-112">[!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)]2d 图形的坐标系将原点定位在呈现图面的左上角 (通常是) 屏幕。</span><span class="sxs-lookup"><span data-stu-id="1fb39-112">The [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] coordinate system for 2D graphics locates the origin in the upper left of the rendering surface (typically the screen).</span></span> <span data-ttu-id="1fb39-113">在二维系统中，正 x 轴值向右移动，正值 y 轴值向下移动。</span><span class="sxs-lookup"><span data-stu-id="1fb39-113">In the 2D system, positive x-axis values proceed to the right and positive y-axis values proceed downward.</span></span> <span data-ttu-id="1fb39-114">但是，在3D 坐标系中，原点位于屏幕的中心，正 x 轴值前进到右侧，但 y 轴上的正值朝上向右，而从原点向外沿正值前进到查看器。</span><span class="sxs-lookup"><span data-stu-id="1fb39-114">In the 3D coordinate system, however, the origin is located in the center of the screen, with positive x-axis values proceeding to the right but positive y-axis values proceeding upward instead, and positive z-axis values proceeding outward from the origin, toward the viewer.</span></span>  
  
 <span data-ttu-id="1fb39-115">![坐标系统](./media/coordsystem-1.png "CoordSystem-1")</span><span class="sxs-lookup"><span data-stu-id="1fb39-115">![Coordinate systems](./media/coordsystem-1.png "CoordSystem-1")</span></span>  
<span data-ttu-id="1fb39-116">坐标系比较</span><span class="sxs-lookup"><span data-stu-id="1fb39-116">Coordinate System Comparison</span></span>  
  
 <span data-ttu-id="1fb39-117">这些轴定义的空间是中三维对象的固定参考框架 [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="1fb39-117">The space defined by these axes is the stationary frame of reference for 3D objects in [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)].</span></span> <span data-ttu-id="1fb39-118">当在该空间中生成模型并创建光源和照相机以查看这些模型时，一定要在向每个模型应用转换时，将固定参考框架或“全局空间”与为该模型创建的局部参考框架区分开。</span><span class="sxs-lookup"><span data-stu-id="1fb39-118">As you build models in this space and create lights and cameras to view them, it's helpful to distinguish this stationary frame of reference, or "world space," from the local frame of reference you create for each model when you apply transformations to it.</span></span> <span data-ttu-id="1fb39-119">另请记住，根据光源和照相机设置，全局空间中的对象可能会看上去完全不同或者根本不可见，但是照相机的位置不会改变对象在全局空间中的位置。</span><span class="sxs-lookup"><span data-stu-id="1fb39-119">Remember also that objects in world space might look entirely different, or not be visible at all, depending on light and camera settings, but the position of the camera does not change the location of objects in world space.</span></span>  
  
## <a name="transforming-models"></a><span data-ttu-id="1fb39-120">转换模型</span><span class="sxs-lookup"><span data-stu-id="1fb39-120">Transforming Models</span></span>  
 <span data-ttu-id="1fb39-121">创建模型时，它们在场景中有特定的位置。</span><span class="sxs-lookup"><span data-stu-id="1fb39-121">When you create models, they have a particular location in the scene.</span></span> <span data-ttu-id="1fb39-122">为了在场景中移动、旋转这些模型或者更改这些模型的大小而更改用来定义模型本身的顶点不切实际。</span><span class="sxs-lookup"><span data-stu-id="1fb39-122">To move those models around in the scene, to rotate them, or to change their size, it's not practical to change the vertices that define the models themselves.</span></span> <span data-ttu-id="1fb39-123">与在2D 中一样，可以将转换应用于模型。</span><span class="sxs-lookup"><span data-stu-id="1fb39-123">Instead, just as in 2D, you apply transformations to models.</span></span>  
  
 <span data-ttu-id="1fb39-124">每个模型对象都有一个 <xref:System.Windows.Media.Media3D.Model3D.Transform%2A> 属性，您可以使用该属性对模型进行移动、重新定向或调整大小。</span><span class="sxs-lookup"><span data-stu-id="1fb39-124">Each model object has a <xref:System.Windows.Media.Media3D.Model3D.Transform%2A> property with which you can move, re-orient, or resize the model.</span></span> <span data-ttu-id="1fb39-125">应用转换时，实际上是按照由转换功能指定的矢量或值（以适用者为准）来偏移模型的所有点。</span><span class="sxs-lookup"><span data-stu-id="1fb39-125">When you apply a transform, you effectively offset all the points of the model by whatever vector or value is specified by the transform.</span></span> <span data-ttu-id="1fb39-126">换言之，用户已经转换了在其中定义模型的坐标空间（“模型空间”），但是尚未更改在整个场景的坐标系（“全局空间”）中构成模型几何形状的值。</span><span class="sxs-lookup"><span data-stu-id="1fb39-126">In other words, you've transformed the coordinate space in which the model is defined ("model space"), but you haven't changed the values that make up the model's geometry in the coordinate system of the entire scene ("world space").</span></span>  
  
## <a name="translation-transformations"></a><span data-ttu-id="1fb39-127">平移转换</span><span class="sxs-lookup"><span data-stu-id="1fb39-127">Translation Transformations</span></span>  
 <span data-ttu-id="1fb39-128">三维转换继承自抽象基类 <xref:System.Windows.Media.Media3D.Transform3D> ; 其中包括仿射转换类 <xref:System.Windows.Media.Media3D.TranslateTransform3D> 、 <xref:System.Windows.Media.Media3D.ScaleTransform3D> 和 <xref:System.Windows.Media.Media3D.RotateTransform3D> 。</span><span class="sxs-lookup"><span data-stu-id="1fb39-128">3D transformations inherit from the abstract base class <xref:System.Windows.Media.Media3D.Transform3D>; these include the affine transform classes <xref:System.Windows.Media.Media3D.TranslateTransform3D>, <xref:System.Windows.Media.Media3D.ScaleTransform3D>, and <xref:System.Windows.Media.Media3D.RotateTransform3D>.</span></span> <span data-ttu-id="1fb39-129">[!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)]3d 系统还提供了一个 <xref:System.Windows.Media.Media3D.MatrixTransform3D> 类，使您可以在更简洁的矩阵操作中指定相同的转换。</span><span class="sxs-lookup"><span data-stu-id="1fb39-129">The [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 3D system also provides a <xref:System.Windows.Media.Media3D.MatrixTransform3D> class that lets you specify the same transformations in more concise matrix operations.</span></span>  
  
 <span data-ttu-id="1fb39-130"><xref:System.Windows.Media.Media3D.TranslateTransform3D> 按指定的偏移量向量的方向移动 Model3D 中的所有点 <xref:System.Windows.Media.Media3D.TranslateTransform3D.OffsetX%2A> ，以及、 <xref:System.Windows.Media.Media3D.TranslateTransform3D.OffsetY%2A> 和 <xref:System.Windows.Media.Media3D.TranslateTransform3D.OffsetZ%2A> 属性。</span><span class="sxs-lookup"><span data-stu-id="1fb39-130"><xref:System.Windows.Media.Media3D.TranslateTransform3D> moves all the points in the Model3D in the direction of the offset vector you specify with the <xref:System.Windows.Media.Media3D.TranslateTransform3D.OffsetX%2A>, <xref:System.Windows.Media.Media3D.TranslateTransform3D.OffsetY%2A>, and <xref:System.Windows.Media.Media3D.TranslateTransform3D.OffsetZ%2A> properties.</span></span> <span data-ttu-id="1fb39-131">例如，假设立方体的一个顶点位于 (2,2,2)，偏移矢量 (0,1.6,1) 会将该顶点 (2,2,2) 移到 (2,3.6,3)。</span><span class="sxs-lookup"><span data-stu-id="1fb39-131">For example, given one vertex of a cube at (2,2,2), an offset vector of (0,1.6,1) would move that vertex (2,2,2) to (2,3.6,3).</span></span> <span data-ttu-id="1fb39-132">该立方体的顶点在模型空间中仍位于 (2,2,2)，但是现在，该模型空间与全局空间的关系已经发生改变，因此，模型空间中的 (2,2,2) 是世界空间中的 (2,3.6,3)。</span><span class="sxs-lookup"><span data-stu-id="1fb39-132">The cube's vertex is still (2,2,2) in model space, but now that model space has changed its relationship to world space so that (2,2,2) in model space is (2,3.6,3) in world space.</span></span>  
  
 <span data-ttu-id="1fb39-133">![平移图](./media/transforms-translate.png "Transforms-Translate")</span><span class="sxs-lookup"><span data-stu-id="1fb39-133">![Translation figure](./media/transforms-translate.png "Transforms-Translate")</span></span>  
<span data-ttu-id="1fb39-134">偏移后的平移</span><span class="sxs-lookup"><span data-stu-id="1fb39-134">Translation with Offset</span></span>  
  
 <span data-ttu-id="1fb39-135">下面的代码示例演示如何应用平移。</span><span class="sxs-lookup"><span data-stu-id="1fb39-135">The following code examples show how to apply a translation.</span></span>  
  
 [!code-xaml[animation3dgallery_snip#Translation3DAnimationExampleWholePage](~/samples/snippets/csharp/VS_Snippets_Wpf/Animation3DGallery_snip/CS/Translation3DAnimationExample.xaml#translation3danimationexamplewholepage)]  
  
## <a name="scale-transformations"></a><span data-ttu-id="1fb39-136">缩放转换</span><span class="sxs-lookup"><span data-stu-id="1fb39-136">Scale Transformations</span></span>  
 <span data-ttu-id="1fb39-137"><xref:System.Windows.Media.Media3D.ScaleTransform3D> 通过对中心点的引用来更改模型的小数位数。</span><span class="sxs-lookup"><span data-stu-id="1fb39-137"><xref:System.Windows.Media.Media3D.ScaleTransform3D> changes the model's scale by a specified scale vector with reference to a center point.</span></span> <span data-ttu-id="1fb39-138">可以指定等比缩放，即在 X、Y 和 Z 轴上将模型缩放同样的值来按比例更改模型的大小。</span><span class="sxs-lookup"><span data-stu-id="1fb39-138">Specify a uniform scale, which scales the model by the same value in the X, Y, and Z axes, to change the model's size proportionally.</span></span> <span data-ttu-id="1fb39-139">例如，如果将转换的 <xref:System.Windows.Media.ScaleTransform.ScaleX%2A> 、和属性设置为0.5，则会将模型的大小设置为2，将 <xref:System.Windows.Media.ScaleTransform.ScaleY%2A> 相同的 <xref:System.Windows.Media.Media3D.ScaleTransform3D.ScaleZ%2A> 属性设置为2，使其在所有三个轴中的比例加倍。</span><span class="sxs-lookup"><span data-stu-id="1fb39-139">For example, setting the transform's <xref:System.Windows.Media.ScaleTransform.ScaleX%2A>, <xref:System.Windows.Media.ScaleTransform.ScaleY%2A>, and <xref:System.Windows.Media.Media3D.ScaleTransform3D.ScaleZ%2A> properties to 0.5 halves the size of the model; setting the same properties to 2 doubles its scale in all three axes.</span></span>  
  
 <span data-ttu-id="1fb39-140">![Uniform ScaleTransform3D](./media/threecubes-uniformscale-1.png "threecubes_uniformscale_1")</span><span class="sxs-lookup"><span data-stu-id="1fb39-140">![Uniform ScaleTransform3D](./media/threecubes-uniformscale-1.png "threecubes_uniformscale_1")</span></span>  
<span data-ttu-id="1fb39-141">ScaleVector 示例</span><span class="sxs-lookup"><span data-stu-id="1fb39-141">ScaleVector Example</span></span>  
  
 <span data-ttu-id="1fb39-142">通过指定非等比转换（X、Y 和 Z 值不相等的缩放转换），可以使模型在一个或两个维度上拉伸或收缩，而不会影响其他维度。</span><span class="sxs-lookup"><span data-stu-id="1fb39-142">By specifying a non-uniform scale transformation—a scale transformation whose X, Y, and Z values are not all the same—you can cause a model to stretch or contract in one or two dimensions without affecting the others.</span></span> <span data-ttu-id="1fb39-143">例如，将设置 <xref:System.Windows.Media.ScaleTransform.ScaleX%2A> 为1，将设置为 <xref:System.Windows.Media.ScaleTransform.ScaleY%2A> 2，而将设置为 <xref:System.Windows.Media.Media3D.ScaleTransform3D.ScaleZ%2A> 1 将导致转换后的模型的高度加倍，但沿 X 轴和 Z 轴保持不变。</span><span class="sxs-lookup"><span data-stu-id="1fb39-143">For example, setting <xref:System.Windows.Media.ScaleTransform.ScaleX%2A> to 1, <xref:System.Windows.Media.ScaleTransform.ScaleY%2A> to 2, and <xref:System.Windows.Media.Media3D.ScaleTransform3D.ScaleZ%2A> to 1 would cause the transformed model to double in height but remain unchanged along the X and Z axes.</span></span>  
  
 <span data-ttu-id="1fb39-144">默认情况下，ScaleTransform3D 会使顶点围绕原点 (0,0,0) 拉伸或收缩。</span><span class="sxs-lookup"><span data-stu-id="1fb39-144">By default, ScaleTransform3D causes vertices to expand or contract about the origin (0,0,0).</span></span> <span data-ttu-id="1fb39-145">但是，如果要转换的模型不是围绕原点绘制，则围绕原点缩放模型时，模型将不会“就地”缩放。</span><span class="sxs-lookup"><span data-stu-id="1fb39-145">If the model you want to transform is not drawn from the origin, however, scaling the model from the origin will not scale the model "in place."</span></span> <span data-ttu-id="1fb39-146">相反，当模型的顶点与缩放矢量相乘时，缩放操作对模型的平移和缩放都会产生影响。</span><span class="sxs-lookup"><span data-stu-id="1fb39-146">Instead, when the model's vertices are multiplied by the scale vector, the scale operation will have the effect of translating the model as well as scaling it.</span></span>  
  
 <span data-ttu-id="1fb39-147">![指定中心点后缩放的三个立方体](./media/threecubes-scaledwithcenter-1.png "threecubes_scaledwithcenter_1")</span><span class="sxs-lookup"><span data-stu-id="1fb39-147">![Three cubes scaled with center point specified](./media/threecubes-scaledwithcenter-1.png "threecubes_scaledwithcenter_1")</span></span>  
<span data-ttu-id="1fb39-148">缩放中心示例</span><span class="sxs-lookup"><span data-stu-id="1fb39-148">Scale Center Example</span></span>  
  
 <span data-ttu-id="1fb39-149">若要 "就地" 缩放模型，请通过设置 ScaleTransform3D's <xref:System.Windows.Media.ScaleTransform.CenterX%2A> 、和属性来指定模型的中心 <xref:System.Windows.Media.ScaleTransform.CenterY%2A> <xref:System.Windows.Media.Media3D.ScaleTransform3D.CenterZ%2A> 。</span><span class="sxs-lookup"><span data-stu-id="1fb39-149">To scale a model "in place," specify the center of the model by setting the ScaleTransform3D's <xref:System.Windows.Media.ScaleTransform.CenterX%2A>, <xref:System.Windows.Media.ScaleTransform.CenterY%2A>, and <xref:System.Windows.Media.Media3D.ScaleTransform3D.CenterZ%2A> properties.</span></span> <span data-ttu-id="1fb39-150">这可确保图形系统缩放模型空间，然后将其转换为在指定的中心 <xref:System.Windows.Media.Media3D.Point3D> 。</span><span class="sxs-lookup"><span data-stu-id="1fb39-150">This ensures that the graphics system scales the model space and then translates it to center on the specified <xref:System.Windows.Media.Media3D.Point3D>.</span></span> <span data-ttu-id="1fb39-151">相反，如果模型围绕原点生成，而且指定了其他中心点，则将看到模型会背离原点平移。</span><span class="sxs-lookup"><span data-stu-id="1fb39-151">Conversely, if you've built the model about the origin and specify a different center point, expect to see the model translated away from the origin.</span></span>  
  
## <a name="rotation-transformations"></a><span data-ttu-id="1fb39-152">旋转转换</span><span class="sxs-lookup"><span data-stu-id="1fb39-152">Rotation Transformations</span></span>  
 <span data-ttu-id="1fb39-153">您可以通过多种不同的方式在3D 中旋转模型。</span><span class="sxs-lookup"><span data-stu-id="1fb39-153">You can rotate a model in 3D in several different ways.</span></span> <span data-ttu-id="1fb39-154">典型的旋转转换指定一个轴以及围绕该轴旋转的角度。</span><span class="sxs-lookup"><span data-stu-id="1fb39-154">A typical rotation transformation specifies an axis and an angle of rotation around that axis.</span></span> <span data-ttu-id="1fb39-155"><xref:System.Windows.Media.Media3D.RotateTransform3D>利用类，您可以 <xref:System.Windows.Media.Media3D.Rotation3D> 使用其属性定义 <xref:System.Windows.Media.Media3D.RotateTransform3D.Rotation%2A> 。</span><span class="sxs-lookup"><span data-stu-id="1fb39-155">The <xref:System.Windows.Media.Media3D.RotateTransform3D> class allows you to define a <xref:System.Windows.Media.Media3D.Rotation3D> with its <xref:System.Windows.Media.Media3D.RotateTransform3D.Rotation%2A> property.</span></span> <span data-ttu-id="1fb39-156">然后，在 <xref:System.Windows.Media.Media3D.AxisAngleRotation3D.Axis%2A> <xref:System.Windows.Media.Media3D.AxisAngleRotation3D.Angle%2A> Rotation3D 上指定和属性（在本例中为 <xref:System.Windows.Media.Media3D.AxisAngleRotation3D> ）以定义转换。</span><span class="sxs-lookup"><span data-stu-id="1fb39-156">You then specify <xref:System.Windows.Media.Media3D.AxisAngleRotation3D.Axis%2A> and <xref:System.Windows.Media.Media3D.AxisAngleRotation3D.Angle%2A> properties on the Rotation3D, in this case an <xref:System.Windows.Media.Media3D.AxisAngleRotation3D>, to define the transformation.</span></span> <span data-ttu-id="1fb39-157">下面的几个示例围绕 Y 轴将模型旋转 60 度。</span><span class="sxs-lookup"><span data-stu-id="1fb39-157">The following examples rotate a model by 60 degrees around the Y axis.</span></span>  
  
 [!code-xaml[animation3dgallery_snip#Rotate3DUsingAxisAngleRotation3DExampleWholePage](~/samples/snippets/csharp/VS_Snippets_Wpf/Animation3DGallery_snip/CS/Rotat3DUsingAxisAngleRotation3DExample.xaml#rotate3dusingaxisanglerotation3dexamplewholepage)]  
  
 <span data-ttu-id="1fb39-158">注意： [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 3d 是一个右手系统，这意味着旋转的正角值将导致围绕该轴的逆时针旋转。</span><span class="sxs-lookup"><span data-stu-id="1fb39-158">Note:[!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 3D is a right-handed system, which means that a positive angle value for a rotation results in a counter-clockwise rotation about the axis.</span></span>  
  
 <span data-ttu-id="1fb39-159">如果未 <xref:System.Windows.Media.Media3D.RotateTransform3D.CenterX%2A> <xref:System.Windows.Media.Media3D.RotateTransform3D.CenterY%2A> 在 RotateTransform3D 上为、和属性指定值，则轴旋转角度会假设绕原点旋转 <xref:System.Windows.Media.Media3D.RotateTransform3D.CenterZ%2A> 。</span><span class="sxs-lookup"><span data-stu-id="1fb39-159">Axis-angle rotations assume rotation about the origin if a value is not specified for the <xref:System.Windows.Media.Media3D.RotateTransform3D.CenterX%2A>, <xref:System.Windows.Media.Media3D.RotateTransform3D.CenterY%2A>, and <xref:System.Windows.Media.Media3D.RotateTransform3D.CenterZ%2A> properties on RotateTransform3D.</span></span> <span data-ttu-id="1fb39-160">与缩放一样，牢记旋转时会转换模型的整个坐标空间，这会很有帮助。</span><span class="sxs-lookup"><span data-stu-id="1fb39-160">As with scaling, it's helpful to remember that the rotation transforms the model's entire coordinate space.</span></span> <span data-ttu-id="1fb39-161">如果模型不是围绕原点创建，或者它以前平移过，则旋转可能会围绕原点“转动”，而不是就地旋转。</span><span class="sxs-lookup"><span data-stu-id="1fb39-161">If the model was not created about the origin, or has been translated previously, the rotation might "pivot" about the origin instead of rotating in place.</span></span>  
  
 <span data-ttu-id="1fb39-162">![围绕新中心点旋转](./media/threecubes-rotationwithcenter-1.png "threecubes_rotationwithcenter_1")</span><span class="sxs-lookup"><span data-stu-id="1fb39-162">![Rotation with new center point](./media/threecubes-rotationwithcenter-1.png "threecubes_rotationwithcenter_1")</span></span>  
<span data-ttu-id="1fb39-163">围绕指定的新中心旋转</span><span class="sxs-lookup"><span data-stu-id="1fb39-163">Rotation with new center specified</span></span>  
  
 <span data-ttu-id="1fb39-164">若要“就地”旋转模型，请将模型的实际中心指定为旋转中心。</span><span class="sxs-lookup"><span data-stu-id="1fb39-164">To rotate the model "in place," specify the model's actual center as the center of rotation.</span></span> <span data-ttu-id="1fb39-165">由于几何形状通常围绕原点建模，因此，在依次执行下列操作时通常将获取一组预期的转换结果：调整模型大小（缩放该模型），然后设置模型方向（旋转该模型），最后将模型移到所需的位置（平移该模型）。</span><span class="sxs-lookup"><span data-stu-id="1fb39-165">Because geometry is typically modeled about the origin, you can most often get the expected result of a set of transformations by first sizing the model (scaling it), then setting its orientation (rotating it), and finally moving it to the desired location (translating it).</span></span>  
  
 <span data-ttu-id="1fb39-166">![在 x 和 y 轴上旋转 60 度](./media/twocubes-rotation2axes-1.png "twocubes_rotation2axes_1")</span><span class="sxs-lookup"><span data-stu-id="1fb39-166">![Rotation by 60 degrees in x&#45; and y&#45;axes](./media/twocubes-rotation2axes-1.png "twocubes_rotation2axes_1")</span></span>  
<span data-ttu-id="1fb39-167">旋转示例</span><span class="sxs-lookup"><span data-stu-id="1fb39-167">Rotation Example</span></span>  
  
 <span data-ttu-id="1fb39-168">指定了轴和角度的旋转非常适于静态转换和某些动画。</span><span class="sxs-lookup"><span data-stu-id="1fb39-168">Axis-angle rotations work well for static transformations and some animations.</span></span> <span data-ttu-id="1fb39-169">但是，请考虑围绕 X 轴将立方体模型旋转 60 度，然后围绕 Z 轴将其旋转 45 度。</span><span class="sxs-lookup"><span data-stu-id="1fb39-169">However, consider rotating a cube model 60 degrees around the X axis, then 45 degrees around the Z axis.</span></span> <span data-ttu-id="1fb39-170">可以将这种转换描述为两个离散的仿射转换，也可以将其描述为一个矩阵。</span><span class="sxs-lookup"><span data-stu-id="1fb39-170">You can describe this transformation as two discrete affine transformations, or as a matrix.</span></span> <span data-ttu-id="1fb39-171">但是，对于按照这种方式定义的旋转，可能很难顺利地进行动画处理。</span><span class="sxs-lookup"><span data-stu-id="1fb39-171">However, it might be difficult to smoothly animate a rotation defined this way.</span></span> <span data-ttu-id="1fb39-172">尽管按照这两种方法计算的模型起始位置和结束位置相同，但是，从计算的角度来看，无法确定该模型经过的中间位置。</span><span class="sxs-lookup"><span data-stu-id="1fb39-172">Although the beginning and ending positions of the model computed by either approach are the same, the intermediate positions taken by the model are computationally uncertain.</span></span> <span data-ttu-id="1fb39-173">四元数提供了一种用来在旋转的起始位置和结束位置之间计算内插值的替代方法。</span><span class="sxs-lookup"><span data-stu-id="1fb39-173">Quaternions represent an alternative way to compute the interpolation between the start and end of a rotation.</span></span>  
  
 <span data-ttu-id="1fb39-174">四元数表示 3D 空间中的轴和绕该轴的旋转。</span><span class="sxs-lookup"><span data-stu-id="1fb39-174">A quaternion represents an axis in 3D space and a rotation around that axis.</span></span> <span data-ttu-id="1fb39-175">例如，四元数可以表示 (1,1,2) 轴以及 50 度的旋转角度。</span><span class="sxs-lookup"><span data-stu-id="1fb39-175">For example, a quaternion might represent a (1,1,2) axis and a rotation of 50 degrees.</span></span> <span data-ttu-id="1fb39-176">四元数在定义旋转方面的价值在于可以针对它们执行的两个运算：合成和内插。</span><span class="sxs-lookup"><span data-stu-id="1fb39-176">Quaternions’ power in defining rotations comes from the two operations that you can perform on them: composition and interpolation.</span></span> <span data-ttu-id="1fb39-177">应用于一个几何形状的两个四元数的合成是指“围绕 axis2 将几何形状旋转 rotation2 度，然后围绕 axis1 将其旋转 rotation1 度”。</span><span class="sxs-lookup"><span data-stu-id="1fb39-177">The composition of two quaternions applied to a geometry means "rotate the geometry around axis2 by rotation2, then rotate it around axis1 by rotation1."</span></span> <span data-ttu-id="1fb39-178">通过使用合成运算，可以将应用于几何形状的两个旋转合成在一起，以便获得一个代表合成结果的四元数。</span><span class="sxs-lookup"><span data-stu-id="1fb39-178">By using composition, you can combine the two rotations on the geometry to get a single quaternion that represents the result.</span></span> <span data-ttu-id="1fb39-179">由于四元数内插可以计算出从一个轴和方向到另一个轴和方向的顺利而又合理的路径，因此可以从原始位置到合成的四元数之间进行内插，以便实现从一个位置到另一个位置的顺利过渡，从而可以对该转换进行动画处理。</span><span class="sxs-lookup"><span data-stu-id="1fb39-179">Because quaternion interpolation can calculate a smooth and reasonable path from one axis and orientation to another, you can interpolate from the original to the composed quaternion to achieve a smooth transition from one to the other, enabling you to animate the transformation.</span></span> <span data-ttu-id="1fb39-180">对于要进行动画处理的模型，可以 <xref:System.Windows.Media.Media3D.Quaternion> 使用属性的来指定旋转目标 <xref:System.Windows.Media.Media3D.QuaternionRotation3D> <xref:System.Windows.Media.Media3D.RotateTransform3D.Rotation%2A> 。</span><span class="sxs-lookup"><span data-stu-id="1fb39-180">For models that you want to animate, you can specify a destination <xref:System.Windows.Media.Media3D.Quaternion> for the rotation by using a <xref:System.Windows.Media.Media3D.QuaternionRotation3D> for the <xref:System.Windows.Media.Media3D.RotateTransform3D.Rotation%2A> property.</span></span>  
  
## <a name="using-transformation-collections"></a><span data-ttu-id="1fb39-181">使用转换集合</span><span class="sxs-lookup"><span data-stu-id="1fb39-181">Using Transformation Collections</span></span>  
 <span data-ttu-id="1fb39-182">生成场景时，通常会向模型应用多个转换。</span><span class="sxs-lookup"><span data-stu-id="1fb39-182">When building a scene, it's common to apply more than one transformation to a model.</span></span> <span data-ttu-id="1fb39-183">将转换添加到 <xref:System.Windows.Media.Media3D.Transform3DGroup.Children%2A> 类的集合 <xref:System.Windows.Media.Media3D.Transform3DGroup> ，以便可以方便地将变换分组到场景中的各种模型。</span><span class="sxs-lookup"><span data-stu-id="1fb39-183">Add transforms to the <xref:System.Windows.Media.Media3D.Transform3DGroup.Children%2A> collection of the <xref:System.Windows.Media.Media3D.Transform3DGroup> class to group transforms conveniently to apply to various models in the scene.</span></span> <span data-ttu-id="1fb39-184">通常，可以很方便地在几个不同的组中重复使用某个转换，这与通过向每个实例应用一组不同的转换来重复使用模型大体相同。</span><span class="sxs-lookup"><span data-stu-id="1fb39-184">It's often convenient to reuse a transformation in several different groups, in much the way that you can reuse a model by applying a different set of transforms to each instance.</span></span> <span data-ttu-id="1fb39-185">请注意，将转换添加到集合中的顺序至关重要：集合中的转换按照从第一个到最后一个的顺序应用。</span><span class="sxs-lookup"><span data-stu-id="1fb39-185">Note that order in which the transformations are added to the collection is significant: transforms in the collection are applied from first to last.</span></span>  
  
## <a name="animating-transformations"></a><span data-ttu-id="1fb39-186">对转换进行动画处理</span><span class="sxs-lookup"><span data-stu-id="1fb39-186">Animating Transformations</span></span>  
 <span data-ttu-id="1fb39-187">[!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)]3d 实现与2d 图形参与相同的计时和动画系统。</span><span class="sxs-lookup"><span data-stu-id="1fb39-187">The [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 3D implementation participates in the same timing and animation system as 2D graphics.</span></span> <span data-ttu-id="1fb39-188">换句话说，若要对三维场景进行动画处理，请对其模型的属性进行动画处理。</span><span class="sxs-lookup"><span data-stu-id="1fb39-188">In other words, to animate a 3D scene, animate the properties of its models.</span></span> <span data-ttu-id="1fb39-189">可以直接对基元的属性进行动画处理，但是通常很容易对用来更改模型位置或外观的转换进行动画处理。</span><span class="sxs-lookup"><span data-stu-id="1fb39-189">It's possible to animate properties of primitives directly, but it's typically easier to animate transformations that change the position or appearance of models.</span></span> <span data-ttu-id="1fb39-190">由于转换可以应用于 <xref:System.Windows.Media.Media3D.Model3DGroup> 对象以及单个模型，因此可以将一组动画应用到 Model3Dgroup 的子级，并将另一组动画应用于一组对象。</span><span class="sxs-lookup"><span data-stu-id="1fb39-190">Because transformations can be applied to <xref:System.Windows.Media.Media3D.Model3DGroup> objects as well as individual models, it's possible to apply one set of animations to the children of a Model3Dgroup and another set of animations to a group of objects.</span></span>  <span data-ttu-id="1fb39-191">有关 [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 计时和动画系统的背景信息，请参阅[动画概述](animation-overview.md)和[演示图板概述](storyboards-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="1fb39-191">For background information on the [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] timing and animation system, see [Animation Overview](animation-overview.md) and [Storyboards Overview](storyboards-overview.md).</span></span>  
  
 <span data-ttu-id="1fb39-192">若要对 [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 中的对象进行动画处理，可以创建时间线、定义动画（实际上是随着时间的推移而更改某个属性值）并指定要向其应用动画的属性。</span><span class="sxs-lookup"><span data-stu-id="1fb39-192">To animate an object in [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)], create a timeline, define an animation (which is really a change in some property value over time), and specify the property to which to apply the animation.</span></span> <span data-ttu-id="1fb39-193">此属性必须是 FrameworkElement 的属性。</span><span class="sxs-lookup"><span data-stu-id="1fb39-193">This property must be a property of a FrameworkElement.</span></span> <span data-ttu-id="1fb39-194">由于三维场景中的所有对象都是 Viewport3D 的子级，因此，要应用于场景的任何动画的目标属性都是 Viewport3D 的属性的属性。</span><span class="sxs-lookup"><span data-stu-id="1fb39-194">Because all the objects in a 3D scene are children of Viewport3D, the properties targeted by any animation you want to apply to the scene are properties of properties of Viewport3D.</span></span> <span data-ttu-id="1fb39-195">请务必仔细设计动画的属性路径，因为语法可能会极为冗长。</span><span class="sxs-lookup"><span data-stu-id="1fb39-195">It's important to work out the property path for the animation carefully, because the syntax can be verbose.</span></span>  
  
 <span data-ttu-id="1fb39-196">假设用户希望就地旋转某个对象，而且还希望应用摆动动作以公开要查看的对象的更多内容。</span><span class="sxs-lookup"><span data-stu-id="1fb39-196">Suppose you want to rotate an object in place, but also to apply a swinging motion to expose more of the object to view.</span></span> <span data-ttu-id="1fb39-197">可以选择向模型应用 RotateTransform3D，并对模型从一个矢量旋转到另一个矢量时所围绕的轴进行动画处理。</span><span class="sxs-lookup"><span data-stu-id="1fb39-197">You might choose to apply a RotateTransform3D to the model, and animate the axis of its rotation from one vector to another.</span></span> <span data-ttu-id="1fb39-198">下面的代码示例演示如何将应用于 <xref:System.Windows.Media.Animation.Vector3DAnimation> 转换的 Rotation3D 的轴属性，假设 RotateTransform3D 是应用于模型的多个转换之一 <xref:System.Windows.Media.TransformGroup> 。</span><span class="sxs-lookup"><span data-stu-id="1fb39-198">The following code example demonstrates applying a <xref:System.Windows.Media.Animation.Vector3DAnimation> to the Axis property of the transformation's Rotation3D, assuming the RotateTransform3D to be one of several transforms applied to the model with a <xref:System.Windows.Media.TransformGroup>.</span></span>  
  
 [!code-csharp[3doverview#3DOverview3DN1](~/samples/snippets/csharp/VS_Snippets_Wpf/3DOverview/CSharp/Window1.xaml.cs#3doverview3dn1)]
 [!code-vb[3doverview#3DOverview3DN1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/3DOverview/visualbasic/window1.xaml.vb#3doverview3dn1)]  
  
 [!code-csharp[3doverview#3DOverview3DN3](~/samples/snippets/csharp/VS_Snippets_Wpf/3DOverview/CSharp/Window1.xaml.cs#3doverview3dn3)]
 [!code-vb[3doverview#3DOverview3DN3](~/samples/snippets/visualbasic/VS_Snippets_Wpf/3DOverview/visualbasic/window1.xaml.vb#3doverview3dn3)]  
  
 <span data-ttu-id="1fb39-199">使用类似的语法面向其他转换属性来移动或缩放该对象。</span><span class="sxs-lookup"><span data-stu-id="1fb39-199">Use a similar syntax to target other transformation properties to move or scale the object.</span></span>  <span data-ttu-id="1fb39-200">例如，你可以将应用 <xref:System.Windows.Media.Animation.Point3DAnimation> 到缩放转换上的 ScaleCenter 属性，以使模型平滑其形状。</span><span class="sxs-lookup"><span data-stu-id="1fb39-200">For example, you might apply a <xref:System.Windows.Media.Animation.Point3DAnimation> to the ScaleCenter property on a scale transform to cause a model to smoothly distort its shape.</span></span>  
  
 <span data-ttu-id="1fb39-201">尽管前面的示例转换了的属性 <xref:System.Windows.Media.Media3D.GeometryModel3D> ，但也可以转换场景中其他模型的属性。</span><span class="sxs-lookup"><span data-stu-id="1fb39-201">Although the preceding examples transform the properties of <xref:System.Windows.Media.Media3D.GeometryModel3D>, it’s also possible to transform the properties of other models in the scene.</span></span>  <span data-ttu-id="1fb39-202">例如，通过对应用于 Light 对象的平移进行动画处理来创建移动灯光和阴影效果，这些效果可以显著改变模型的外观。</span><span class="sxs-lookup"><span data-stu-id="1fb39-202">By animating translations applied to Light objects, for example, you can create moving light and shadow effects that can dramatically change the appearance of your models.</span></span>  
  
 <span data-ttu-id="1fb39-203">由于照相机也是模型，因此也可以对照相机属性进行转换。</span><span class="sxs-lookup"><span data-stu-id="1fb39-203">Because cameras are also models, it’s possible to transform camera properties as well.</span></span>  <span data-ttu-id="1fb39-204">尽管确实可以通过改变照相机的位置或平面距离来改变场景的外观（实际上是变换整个场景的投影），但应注意，对于观察者来说，以这种方法实现的许多效果不如将转换应用于场景中模型的地点或位置更有“视觉意义”。</span><span class="sxs-lookup"><span data-stu-id="1fb39-204">While you can certainly change the appearance of the scene by transforming the camera location or plane distances—in effect, transforming the entire scene projection—note that many of the effects you achieve this way may not make as much "visual sense" to the viewer as transformations applied to the location or position of the models in the scene.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1fb39-205">另请参阅</span><span class="sxs-lookup"><span data-stu-id="1fb39-205">See also</span></span>

- [<span data-ttu-id="1fb39-206">三维图形概述</span><span class="sxs-lookup"><span data-stu-id="1fb39-206">3D Graphics Overview</span></span>](3-d-graphics-overview.md)
- [<span data-ttu-id="1fb39-207">转换概述</span><span class="sxs-lookup"><span data-stu-id="1fb39-207">Transforms Overview</span></span>](transforms-overview.md)
- [<span data-ttu-id="1fb39-208">2D 转换示例</span><span class="sxs-lookup"><span data-stu-id="1fb39-208">2D Transforms Sample</span></span>](https://github.com/Microsoft/WPF-Samples/tree/master/Graphics/2DTransforms)
