---
title: 属性动画技术概述
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- animation [WPF], properties [WPF], methods for
- properties [WPF], methods for animating
ms.assetid: 74f61413-f8c0-4e75-bf04-951886426c8b
ms.openlocfilehash: 9e29f4ffa96b54aba1b5f3df828bfc16099882fa
ms.sourcegitcommit: 069786bcadbf9cd931d7dc3d892262cd852d2ffb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/19/2021
ms.locfileid: "104668326"
---
# <a name="property-animation-techniques-overview"></a><span data-ttu-id="8ed7a-102">属性动画技术概述</span><span class="sxs-lookup"><span data-stu-id="8ed7a-102">Property Animation Techniques Overview</span></span>

<span data-ttu-id="8ed7a-103">本主题介绍了处理动画属性的不同方法：情节提要、本地动画、时钟和基于帧的动画。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-103">This topic describes the different approaches for animating properties: storyboards, local animations, clocks, and per-frame animations.</span></span>  
  
<a name="prerequisites"></a>

## <a name="prerequisites"></a><span data-ttu-id="8ed7a-104">必备条件</span><span class="sxs-lookup"><span data-stu-id="8ed7a-104">Prerequisites</span></span>  

 <span data-ttu-id="8ed7a-105">若要了解本主题，应熟悉[动画概述](animation-overview.md)中描述的基本动画功能。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-105">To understand this topic, you should be familiar with the basic animation features described in the [Animation Overview](animation-overview.md).</span></span>  
  
<a name="summary"></a>

## <a name="different-ways-to-animate"></a><span data-ttu-id="8ed7a-106">动画处理的不同方法</span><span class="sxs-lookup"><span data-stu-id="8ed7a-106">Different Ways to Animate</span></span>  

 <span data-ttu-id="8ed7a-107">由于动画处理属性存在多种不同的方案，[!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 提供几种动画处理属性的方法。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-107">Because there are many different scenarios for animating properties, [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] provides several approaches for animating properties.</span></span>  
  
 <span data-ttu-id="8ed7a-108">对于每种方法，下表指明了每种方法是否可以基于实例在样式、控件模板或数据模板中使用；是否可以在 [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] 中使用；以及该方法是否能够以交互方式控制动画。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-108">For each approach, the following table indicates whether it can be used per-instance, in styles, in control templates, or in data templates; whether it can be used in [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)]; and whether the approach enables you to interactively control the animation.</span></span>  <span data-ttu-id="8ed7a-109">“基于实例”是指直接将动画或情节提要应用于对象实例（而不是在样式、控件模板或数据模板中应用）的技术。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-109">"Per-Instance" refers to the technique of applying an animation or storyboard directly to instances of an object, rather than in a style, control template, or data template.</span></span>  
  
|<span data-ttu-id="8ed7a-110">动画技术</span><span class="sxs-lookup"><span data-stu-id="8ed7a-110">Animation technique</span></span>|<span data-ttu-id="8ed7a-111">方案</span><span class="sxs-lookup"><span data-stu-id="8ed7a-111">Scenarios</span></span>|<span data-ttu-id="8ed7a-112">支持 XAML</span><span class="sxs-lookup"><span data-stu-id="8ed7a-112">Supports XAML</span></span>|<span data-ttu-id="8ed7a-113">可以交互方式控制</span><span class="sxs-lookup"><span data-stu-id="8ed7a-113">Interactively controllable</span></span>|  
|-------------------------|---------------|-------------------|--------------------------------|  
|<span data-ttu-id="8ed7a-114">情节提要动画</span><span class="sxs-lookup"><span data-stu-id="8ed7a-114">Storyboard animation</span></span>|<span data-ttu-id="8ed7a-115">每个实例、 <xref:System.Windows.Style> 、 <xref:System.Windows.Controls.ControlTemplate> 、 <xref:System.Windows.DataTemplate></span><span class="sxs-lookup"><span data-stu-id="8ed7a-115">Per-instance, <xref:System.Windows.Style>, <xref:System.Windows.Controls.ControlTemplate>, <xref:System.Windows.DataTemplate></span></span>|<span data-ttu-id="8ed7a-116">是</span><span class="sxs-lookup"><span data-stu-id="8ed7a-116">Yes</span></span>|<span data-ttu-id="8ed7a-117">是</span><span class="sxs-lookup"><span data-stu-id="8ed7a-117">Yes</span></span>|  
|<span data-ttu-id="8ed7a-118">本地动画</span><span class="sxs-lookup"><span data-stu-id="8ed7a-118">Local animation</span></span>|<span data-ttu-id="8ed7a-119">基于实例</span><span class="sxs-lookup"><span data-stu-id="8ed7a-119">Per-instance</span></span>|<span data-ttu-id="8ed7a-120">否</span><span class="sxs-lookup"><span data-stu-id="8ed7a-120">No</span></span>|<span data-ttu-id="8ed7a-121">否</span><span class="sxs-lookup"><span data-stu-id="8ed7a-121">No</span></span>|  
|<span data-ttu-id="8ed7a-122">时钟动画</span><span class="sxs-lookup"><span data-stu-id="8ed7a-122">Clock animation</span></span>|<span data-ttu-id="8ed7a-123">基于实例</span><span class="sxs-lookup"><span data-stu-id="8ed7a-123">Per-instance</span></span>|<span data-ttu-id="8ed7a-124">否</span><span class="sxs-lookup"><span data-stu-id="8ed7a-124">No</span></span>|<span data-ttu-id="8ed7a-125">是</span><span class="sxs-lookup"><span data-stu-id="8ed7a-125">Yes</span></span>|  
|<span data-ttu-id="8ed7a-126">基于帧的动画</span><span class="sxs-lookup"><span data-stu-id="8ed7a-126">Per-frame animation</span></span>|<span data-ttu-id="8ed7a-127">基于实例</span><span class="sxs-lookup"><span data-stu-id="8ed7a-127">Per-instance</span></span>|<span data-ttu-id="8ed7a-128">否</span><span class="sxs-lookup"><span data-stu-id="8ed7a-128">No</span></span>|<span data-ttu-id="8ed7a-129">不适用</span><span class="sxs-lookup"><span data-stu-id="8ed7a-129">N/A</span></span>|  
  
<a name="storyboard_animations"></a>

## <a name="storyboard-animations"></a><span data-ttu-id="8ed7a-130">情节提要动画</span><span class="sxs-lookup"><span data-stu-id="8ed7a-130">Storyboard Animations</span></span>  

 <span data-ttu-id="8ed7a-131"><xref:System.Windows.Media.Animation.Storyboard>如果要在中定义和应用动画 [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] ，请使用，在动画开始后以交互方式控制动画，创建复杂的动画树，或在中进行动画处理 <xref:System.Windows.Style> <xref:System.Windows.Controls.ControlTemplate> <xref:System.Windows.DataTemplate> 。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-131">Use a <xref:System.Windows.Media.Animation.Storyboard> when you want to define and apply your animations in [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)], interactively control your animations after they start, create a complex tree of animations, or animate in a <xref:System.Windows.Style>, <xref:System.Windows.Controls.ControlTemplate> or <xref:System.Windows.DataTemplate>.</span></span> <span data-ttu-id="8ed7a-132">对于要进行动画处理的对象 <xref:System.Windows.Media.Animation.Storyboard> ，该对象必须为 <xref:System.Windows.FrameworkElement> 或 <xref:System.Windows.FrameworkContentElement> ，或者必须用于设置 <xref:System.Windows.FrameworkElement> 或 <xref:System.Windows.FrameworkContentElement> 。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-132">For an object to be animated by a <xref:System.Windows.Media.Animation.Storyboard>, it must be a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>, or it must be used to set a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="8ed7a-133">有关详细信息，请参阅[情节提要概述](storyboards-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-133">For more details, see the [Storyboards Overview](storyboards-overview.md).</span></span>  
  
 <span data-ttu-id="8ed7a-134"><xref:System.Windows.Media.Animation.Storyboard>是一种特殊类型的容器 <xref:System.Windows.Media.Animation.Timeline> ，它提供其所包含动画的目标信息。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-134">A <xref:System.Windows.Media.Animation.Storyboard> is a special type of container <xref:System.Windows.Media.Animation.Timeline> that provides targeting information for the animations it contains.</span></span> <span data-ttu-id="8ed7a-135">若要使用进行动画处理 <xref:System.Windows.Media.Animation.Storyboard> ，请完成以下三个步骤。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-135">To animate with a <xref:System.Windows.Media.Animation.Storyboard>, you complete the following three steps.</span></span>  
  
1. <span data-ttu-id="8ed7a-136">声明一个 <xref:System.Windows.Media.Animation.Storyboard> 和一个或多个动画。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-136">Declare a <xref:System.Windows.Media.Animation.Storyboard> and one or more animations.</span></span>  
  
2. <span data-ttu-id="8ed7a-137">使用 <xref:System.Windows.Media.Animation.Storyboard.TargetName%2A> 和 <xref:System.Windows.Media.Animation.Storyboard.TargetProperty> 附加属性来指定每个动画的目标对象和属性。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-137">Use the <xref:System.Windows.Media.Animation.Storyboard.TargetName%2A> and <xref:System.Windows.Media.Animation.Storyboard.TargetProperty> attached properties to specify the target object and property of each animation.</span></span>  
  
3. <span data-ttu-id="8ed7a-138">仅) 为或定义 (代码 <xref:System.Windows.NameScope> <xref:System.Windows.FrameworkElement> <xref:System.Windows.FrameworkContentElement> 。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-138">(Code only) Define a <xref:System.Windows.NameScope> for a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="8ed7a-139">注册要与此或进行动画处理的对象的名称 <xref:System.Windows.FrameworkElement> <xref:System.Windows.FrameworkContentElement> 。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-139">Register the names of the objects to animate with that <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span>  
  
4. <span data-ttu-id="8ed7a-140">开始 <xref:System.Windows.Media.Animation.Storyboard> 。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-140">Begin the <xref:System.Windows.Media.Animation.Storyboard>.</span></span>  
  
 <span data-ttu-id="8ed7a-141">开始将 <xref:System.Windows.Media.Animation.Storyboard> 动画应用于它们会进行动画处理的属性，然后启动它们。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-141">Beginning a <xref:System.Windows.Media.Animation.Storyboard> applies animations to the properties they animate and starts them.</span></span> <span data-ttu-id="8ed7a-142">可以通过两种方式开始 <xref:System.Windows.Media.Animation.Storyboard> ：使用 <xref:System.Windows.Media.Animation.Storyboard.Begin%2A> 类提供的方法 <xref:System.Windows.Media.Animation.Storyboard> ，也可以使用 <xref:System.Windows.Media.Animation.BeginStoryboard> 操作。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-142">There are two ways to begin a <xref:System.Windows.Media.Animation.Storyboard>: you can use the <xref:System.Windows.Media.Animation.Storyboard.Begin%2A> method provided by the <xref:System.Windows.Media.Animation.Storyboard> class, or you can use a <xref:System.Windows.Media.Animation.BeginStoryboard> action.</span></span> <span data-ttu-id="8ed7a-143">在中进行动画处理的唯一方法 [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] 是使用 <xref:System.Windows.Media.Animation.BeginStoryboard> 操作。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-143">The only way to animate in [!INCLUDE[TLA2#tla_xaml](../../../includes/tla2sharptla-xaml-md.md)] is to use a <xref:System.Windows.Media.Animation.BeginStoryboard> action.</span></span> <span data-ttu-id="8ed7a-144"><xref:System.Windows.Media.Animation.BeginStoryboard>操作可以在 <xref:System.Windows.EventTrigger> 、属性或中使用 <xref:System.Windows.Trigger> <xref:System.Windows.DataTrigger> 。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-144">A <xref:System.Windows.Media.Animation.BeginStoryboard> action can be used in an <xref:System.Windows.EventTrigger>, property <xref:System.Windows.Trigger>, or a <xref:System.Windows.DataTrigger>.</span></span>  
  
 <span data-ttu-id="8ed7a-145">下表显示支持每个开始技术的不同位置 <xref:System.Windows.Media.Animation.Storyboard> ：每个实例、样式、控件模板和数据模板。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-145">The following table shows the different places where each <xref:System.Windows.Media.Animation.Storyboard> begin technique is supported: per-instance, style, control template, and data template.</span></span>  
  
|<span data-ttu-id="8ed7a-146">情节提要开始时使用…</span><span class="sxs-lookup"><span data-stu-id="8ed7a-146">Storyboard is begun using…</span></span>|<span data-ttu-id="8ed7a-147">基于实例</span><span class="sxs-lookup"><span data-stu-id="8ed7a-147">Per-instance</span></span>|<span data-ttu-id="8ed7a-148">Style</span><span class="sxs-lookup"><span data-stu-id="8ed7a-148">Style</span></span>|<span data-ttu-id="8ed7a-149">控件模板</span><span class="sxs-lookup"><span data-stu-id="8ed7a-149">Control template</span></span>|<span data-ttu-id="8ed7a-150">数据模板</span><span class="sxs-lookup"><span data-stu-id="8ed7a-150">Data template</span></span>|<span data-ttu-id="8ed7a-151">示例</span><span class="sxs-lookup"><span data-stu-id="8ed7a-151">Example</span></span>|  
|--------------------------------|-------------------|-----------|----------------------|-------------------|-------------|  
|<span data-ttu-id="8ed7a-152"><xref:System.Windows.Media.Animation.BeginStoryboard> 和 <xref:System.Windows.EventTrigger></span><span class="sxs-lookup"><span data-stu-id="8ed7a-152"><xref:System.Windows.Media.Animation.BeginStoryboard> and an <xref:System.Windows.EventTrigger></span></span>|<span data-ttu-id="8ed7a-153">是</span><span class="sxs-lookup"><span data-stu-id="8ed7a-153">Yes</span></span>|<span data-ttu-id="8ed7a-154">是</span><span class="sxs-lookup"><span data-stu-id="8ed7a-154">Yes</span></span>|<span data-ttu-id="8ed7a-155">是</span><span class="sxs-lookup"><span data-stu-id="8ed7a-155">Yes</span></span>|<span data-ttu-id="8ed7a-156">是</span><span class="sxs-lookup"><span data-stu-id="8ed7a-156">Yes</span></span>|[<span data-ttu-id="8ed7a-157">使用情节提要对属性进行动画处理</span><span class="sxs-lookup"><span data-stu-id="8ed7a-157">Animate a Property by Using a Storyboard</span></span>](how-to-animate-a-property-by-using-a-storyboard.md)|  
|<span data-ttu-id="8ed7a-158"><xref:System.Windows.Media.Animation.BeginStoryboard> 和属性 <xref:System.Windows.Trigger></span><span class="sxs-lookup"><span data-stu-id="8ed7a-158"><xref:System.Windows.Media.Animation.BeginStoryboard> and a property <xref:System.Windows.Trigger></span></span>|<span data-ttu-id="8ed7a-159">否</span><span class="sxs-lookup"><span data-stu-id="8ed7a-159">No</span></span>|<span data-ttu-id="8ed7a-160">是</span><span class="sxs-lookup"><span data-stu-id="8ed7a-160">Yes</span></span>|<span data-ttu-id="8ed7a-161">是</span><span class="sxs-lookup"><span data-stu-id="8ed7a-161">Yes</span></span>|<span data-ttu-id="8ed7a-162">是</span><span class="sxs-lookup"><span data-stu-id="8ed7a-162">Yes</span></span>|[<span data-ttu-id="8ed7a-163">在属性值更改时触发动画</span><span class="sxs-lookup"><span data-stu-id="8ed7a-163">Trigger an Animation When a Property Value Changes</span></span>](how-to-trigger-an-animation-when-a-property-value-changes.md)|  
|<span data-ttu-id="8ed7a-164"><xref:System.Windows.Media.Animation.BeginStoryboard> 和 <xref:System.Windows.DataTrigger></span><span class="sxs-lookup"><span data-stu-id="8ed7a-164"><xref:System.Windows.Media.Animation.BeginStoryboard> and a <xref:System.Windows.DataTrigger></span></span>|<span data-ttu-id="8ed7a-165">否</span><span class="sxs-lookup"><span data-stu-id="8ed7a-165">No</span></span>|<span data-ttu-id="8ed7a-166">是</span><span class="sxs-lookup"><span data-stu-id="8ed7a-166">Yes</span></span>|<span data-ttu-id="8ed7a-167">是</span><span class="sxs-lookup"><span data-stu-id="8ed7a-167">Yes</span></span>|<span data-ttu-id="8ed7a-168">是</span><span class="sxs-lookup"><span data-stu-id="8ed7a-168">Yes</span></span>|<span data-ttu-id="8ed7a-169">[如何：在数据更改时触发动画](/previous-versions/dotnet/netframework-3.5/aa970679(v=vs.90))</span><span class="sxs-lookup"><span data-stu-id="8ed7a-169">[How to: Trigger an Animation When Data Changes](/previous-versions/dotnet/netframework-3.5/aa970679(v=vs.90))</span></span>|  
|<span data-ttu-id="8ed7a-170"><xref:System.Windows.Media.Animation.Storyboard.Begin%2A> 方法</span><span class="sxs-lookup"><span data-stu-id="8ed7a-170"><xref:System.Windows.Media.Animation.Storyboard.Begin%2A> method</span></span>|<span data-ttu-id="8ed7a-171">是</span><span class="sxs-lookup"><span data-stu-id="8ed7a-171">Yes</span></span>|<span data-ttu-id="8ed7a-172">否</span><span class="sxs-lookup"><span data-stu-id="8ed7a-172">No</span></span>|<span data-ttu-id="8ed7a-173">否</span><span class="sxs-lookup"><span data-stu-id="8ed7a-173">No</span></span>|<span data-ttu-id="8ed7a-174">否</span><span class="sxs-lookup"><span data-stu-id="8ed7a-174">No</span></span>|[<span data-ttu-id="8ed7a-175">使用情节提要对属性进行动画处理</span><span class="sxs-lookup"><span data-stu-id="8ed7a-175">Animate a Property by Using a Storyboard</span></span>](how-to-animate-a-property-by-using-a-storyboard.md)|  
  
 <span data-ttu-id="8ed7a-176">有关对象的详细信息 <xref:System.Windows.Media.Animation.Storyboard> ，请参阅 [情节提要概述](storyboards-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-176">For more information about <xref:System.Windows.Media.Animation.Storyboard> objects, see the [Storyboards Overview](storyboards-overview.md).</span></span>  
  
## <a name="local-animations"></a><span data-ttu-id="8ed7a-177">本地动画</span><span class="sxs-lookup"><span data-stu-id="8ed7a-177">Local Animations</span></span>  

 <span data-ttu-id="8ed7a-178">本地动画提供了一种简便的方式来对任何对象的依赖属性进行动画处理 <xref:System.Windows.Media.Animation.Animatable> 。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-178">Local animations provide a convenient way to animate a dependency property of any <xref:System.Windows.Media.Animation.Animatable> object.</span></span> <span data-ttu-id="8ed7a-179">如果想要将单一动画应用到属性中，可以使用本地动画，并且动画启动后不需要以交互方式控制动画。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-179">Use local animations when you want to apply a single animation to a property and you don't need to interactively control the animation after it starts.</span></span> <span data-ttu-id="8ed7a-180">与 <xref:System.Windows.Media.Animation.Storyboard> 动画不同，本地动画可以对与或无关的对象进行动画处理 <xref:System.Windows.FrameworkElement> <xref:System.Windows.FrameworkContentElement> 。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-180">Unlike a <xref:System.Windows.Media.Animation.Storyboard> animation, a local animation can animate an object that isn't associated with a <xref:System.Windows.FrameworkElement> or a <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="8ed7a-181">您也不必为 <xref:System.Windows.NameScope> 这种类型的动画定义。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-181">You also don't have to define a <xref:System.Windows.NameScope> for this type of animation.</span></span>  
  
 <span data-ttu-id="8ed7a-182">本地动画可能仅在代码中使用，无法在样式、控件模板或数据模板中定义。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-182">Local animations may only be used in code, and cannot be defined in styles, control templates, or data templates.</span></span> <span data-ttu-id="8ed7a-183">本地动画启动后，无法以交互方式控制。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-183">A local animation cannot be interactively controlled after it is started.</span></span>  
  
 <span data-ttu-id="8ed7a-184">若要使用本地动画进行动画处理，应完成以下步骤。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-184">To animate using a local animation, complete the following steps.</span></span>  
  
1. <span data-ttu-id="8ed7a-185">创建 <xref:System.Windows.Media.Animation.AnimationTimeline> 对象。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-185">Create an <xref:System.Windows.Media.Animation.AnimationTimeline> object.</span></span>  
  
2. <span data-ttu-id="8ed7a-186">使用 <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> 要进行动画处理的对象的方法，将应用 <xref:System.Windows.Media.Animation.AnimationTimeline> 到您指定的属性。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-186">Use the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> method of the object that you want to animate to apply the <xref:System.Windows.Media.Animation.AnimationTimeline> to the property that you specify.</span></span>  
  
 <span data-ttu-id="8ed7a-187">下面的示例演示如何对的宽度和背景色进行动画处理 <xref:System.Windows.Controls.Button> 。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-187">The following example shows how to animate the width and background color of a <xref:System.Windows.Controls.Button>.</span></span>  
  
 [!code-cpp[animateproperty#11](~/samples/snippets/cpp/VS_Snippets_Wpf/animateproperty/CPP/LocalAnimationExample.cpp#11)]
 [!code-csharp[animateproperty#11](~/samples/snippets/csharp/VS_Snippets_Wpf/animateproperty/CSharp/LocalAnimationExample.cs#11)]
 [!code-vb[animateproperty#11](~/samples/snippets/visualbasic/VS_Snippets_Wpf/animateproperty/VisualBasic/LocalAnimationExample.vb#11)]  
  
## <a name="clock-animations"></a><span data-ttu-id="8ed7a-188">时钟动画</span><span class="sxs-lookup"><span data-stu-id="8ed7a-188">Clock Animations</span></span>  

 <span data-ttu-id="8ed7a-189"><xref:System.Windows.Media.MediaPlayer.Clock%2A>当你希望在不使用的情况下进行动画处理 <xref:System.Windows.Media.Animation.Storyboard> 并且你想要在启动时创建复杂的计时树或交互控制动画时，请使用对象。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-189">Use <xref:System.Windows.Media.MediaPlayer.Clock%2A> objects when you want to animate without using a <xref:System.Windows.Media.Animation.Storyboard> and you want to create complex timing trees or interactively control animations after they start.</span></span> <span data-ttu-id="8ed7a-190">您可以使用时钟对象对任何对象的依赖属性进行动画处理 <xref:System.Windows.Media.Animation.Animatable> 。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-190">You can use Clock objects to animate a dependency property of any <xref:System.Windows.Media.Animation.Animatable> object.</span></span>  
  
 <span data-ttu-id="8ed7a-191">不能使用 <xref:System.Windows.Media.Animation.Clock> 对象直接在样式、控件模板或数据模板中进行动画处理。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-191">You cannot use <xref:System.Windows.Media.Animation.Clock> objects directly to animate in styles, control templates, or data templates.</span></span> <span data-ttu-id="8ed7a-192"> (动画和计时系统实际上确实使用 <xref:System.Windows.Media.Animation.Clock> 对象在样式、控件模板和数据模板中进行动画处理，但它必须从创建这些 <xref:System.Windows.Media.Animation.Clock> 对象 <xref:System.Windows.Media.Animation.Storyboard> 。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-192">(The animation and timing system actually does use <xref:System.Windows.Media.Animation.Clock> objects to animate in styles, control templates, and data templates, but it must create those <xref:System.Windows.Media.Animation.Clock> objects for you from a <xref:System.Windows.Media.Animation.Storyboard>.</span></span> <span data-ttu-id="8ed7a-193">有关对象和对象之间的关系的详细信息 <xref:System.Windows.Media.Animation.Storyboard> <xref:System.Windows.Media.Animation.Clock> ，请参阅 [动画和计时系统概述](animation-and-timing-system-overview.md)。 ) </span><span class="sxs-lookup"><span data-stu-id="8ed7a-193">For more information about the relationship between <xref:System.Windows.Media.Animation.Storyboard> objects and <xref:System.Windows.Media.Animation.Clock> objects, see the [Animation and Timing System Overview](animation-and-timing-system-overview.md).)</span></span>  
  
 <span data-ttu-id="8ed7a-194">若要将单个应用于 <xref:System.Windows.Media.Animation.Clock> 属性，请完成以下步骤。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-194">To apply a single <xref:System.Windows.Media.Animation.Clock> to a property, you complete the following steps.</span></span>  
  
1. <span data-ttu-id="8ed7a-195">创建 <xref:System.Windows.Media.Animation.AnimationTimeline> 对象。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-195">Create an <xref:System.Windows.Media.Animation.AnimationTimeline> object.</span></span>  
  
2. <span data-ttu-id="8ed7a-196">使用的 <xref:System.Windows.Media.Animation.AnimationTimeline.CreateClock%2A> 方法 <xref:System.Windows.Media.Animation.AnimationTimeline> 来创建 <xref:System.Windows.Media.Animation.AnimationClock> 。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-196">Use the <xref:System.Windows.Media.Animation.AnimationTimeline.CreateClock%2A> method of the <xref:System.Windows.Media.Animation.AnimationTimeline> to create an <xref:System.Windows.Media.Animation.AnimationClock>.</span></span>  
  
3. <span data-ttu-id="8ed7a-197">使用 <xref:System.Windows.Media.Animation.Animatable.ApplyAnimationClock%2A> 要进行动画处理的对象的方法，将应用于 <xref:System.Windows.Media.Animation.AnimationClock> 指定的属性。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-197">Use the <xref:System.Windows.Media.Animation.Animatable.ApplyAnimationClock%2A> method of the object that you want to animate to apply the <xref:System.Windows.Media.Animation.AnimationClock> to the property you specify.</span></span>  
  
 <span data-ttu-id="8ed7a-198">下面的示例演示如何创建 <xref:System.Windows.Media.Animation.AnimationClock> 并将其应用到两个相似的属性。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-198">The following example shows how to create an <xref:System.Windows.Media.Animation.AnimationClock> and apply it to two similar properties.</span></span>  
  
 [!code-csharp[timingbehaviors_procedural_snip#GraphicsMMCreateAnimationClockWholeClass](~/samples/snippets/csharp/VS_Snippets_Wpf/timingbehaviors_procedural_snip/CSharp/AnimationClockExample.cs#graphicsmmcreateanimationclockwholeclass)]
 [!code-vb[timingbehaviors_procedural_snip#GraphicsMMCreateAnimationClockWholeClass](~/samples/snippets/visualbasic/VS_Snippets_Wpf/timingbehaviors_procedural_snip/visualbasic/animationclockexample.vb#graphicsmmcreateanimationclockwholeclass)]  
  
 <span data-ttu-id="8ed7a-199">如果想要创建一个计时树并用其处理动画属性，应完成以下几个步骤。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-199">To create a timing tree and use it animate properties, you complete the following steps.</span></span>  
  
1. <span data-ttu-id="8ed7a-200">使用 <xref:System.Windows.Media.Animation.ParallelTimeline> 和 <xref:System.Windows.Media.Animation.AnimationTimeline> 对象创建计时树。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-200">Use <xref:System.Windows.Media.Animation.ParallelTimeline> and <xref:System.Windows.Media.Animation.AnimationTimeline> objects to create the timing tree.</span></span>  
  
2. <span data-ttu-id="8ed7a-201">使用 <xref:System.Windows.Media.Animation.TimelineGroup.CreateClock%2A> 根的 <xref:System.Windows.Media.Animation.ParallelTimeline> 来创建 <xref:System.Windows.Media.Animation.ClockGroup> 。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-201">Use the <xref:System.Windows.Media.Animation.TimelineGroup.CreateClock%2A> of the root <xref:System.Windows.Media.Animation.ParallelTimeline> to create a <xref:System.Windows.Media.Animation.ClockGroup>.</span></span>  
  
3. <span data-ttu-id="8ed7a-202">循环访问的 <xref:System.Windows.Media.Animation.ClockGroup.Children%2A> <xref:System.Windows.Media.Animation.ClockGroup> ，并应用其子 <xref:System.Windows.Media.Animation.Clock> 对象。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-202">Iterate through the <xref:System.Windows.Media.Animation.ClockGroup.Children%2A> of the <xref:System.Windows.Media.Animation.ClockGroup> and apply its child <xref:System.Windows.Media.Animation.Clock> objects.</span></span> <span data-ttu-id="8ed7a-203">对于每个 <xref:System.Windows.Media.Animation.AnimationClock> 子级，使用 <xref:System.Windows.Media.Animation.Animatable.ApplyAnimationClock%2A> 要进行动画处理的对象的方法，将应用于 <xref:System.Windows.Media.Animation.AnimationClock> 指定的属性</span><span class="sxs-lookup"><span data-stu-id="8ed7a-203">For each <xref:System.Windows.Media.Animation.AnimationClock> child, use the <xref:System.Windows.Media.Animation.Animatable.ApplyAnimationClock%2A> method of the object that you want to animate to apply the <xref:System.Windows.Media.Animation.AnimationClock> to the property you specify</span></span>  
  
 <span data-ttu-id="8ed7a-204">有关时钟对象的详细信息，请参阅[动画和计时系统概述](animation-and-timing-system-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-204">For more information about Clock objects, see the [Animation and Timing System Overview](animation-and-timing-system-overview.md).</span></span>  
  
## <a name="per-frame-animation-bypass-the-animation-and-timing-system"></a><span data-ttu-id="8ed7a-205">基于帧的动画：绕过动画和计时系统</span><span class="sxs-lookup"><span data-stu-id="8ed7a-205">Per-Frame Animation: Bypass the Animation and Timing System</span></span>  

 <span data-ttu-id="8ed7a-206">在需要完全绕过 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 动画系统时使用此方法。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-206">Use this approach when you need to completely bypass the [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] animation system.</span></span> <span data-ttu-id="8ed7a-207">此方法的一个方案是物理动画，其中的每个动画步骤都要求基于最后一组对象交互来重新计算。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-207">One scenario for this approach is physics animations, where each step in the animation requires objects to be recomputed based on the last set of object interactions.</span></span>  
  
 <span data-ttu-id="8ed7a-208">基于帧的动画无法在样式、控件模板或数据模板内定义。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-208">Per-frame animations cannot be defined inside styles, control templates, or data templates.</span></span>  
  
 <span data-ttu-id="8ed7a-209">若要逐帧进行动画处理，可以注册对象的 <xref:System.Windows.Media.CompositionTarget.Rendering> 事件，该对象包含要进行动画处理的对象。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-209">To animate frame-by-frame, you register for the <xref:System.Windows.Media.CompositionTarget.Rendering> event of the object that contains the objects you want to animate.</span></span> <span data-ttu-id="8ed7a-210">每帧调用一次此事件处理程序方法。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-210">This event handler method gets called once per frame.</span></span> <span data-ttu-id="8ed7a-211">每次 [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] 将可视化树中的持久呈现数据封送到复合树时，都将调用事件处理程序方法。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-211">Each time that [!INCLUDE[TLA2#tla_winclient](../../../includes/tla2sharptla-winclient-md.md)] marshals the persisted rendering data in the visual tree across to the composition tree, your event handler method is called.</span></span>  
  
 <span data-ttu-id="8ed7a-212">在事件处理程序中，执行动画效果所需的任何计算，并设置想要使用这些值进行动画处理的对象的属性。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-212">In your event handler, perform whatever calculations are necessary for your animation effect and set the properties of the objects you want to animate with these values.</span></span>  
  
 <span data-ttu-id="8ed7a-213">若要获取当前帧的显示时间， <xref:System.EventArgs> 可以将与此事件关联的转换为 <xref:System.Windows.Media.RenderingEventArgs> ，这提供了一个 <xref:System.Windows.Media.RenderingEventArgs.RenderingTime%2A> 可用于获取当前帧呈现时间的属性。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-213">To obtain the presentation time for the current frame, the <xref:System.EventArgs> associated with this event can be cast as <xref:System.Windows.Media.RenderingEventArgs>, which provide a <xref:System.Windows.Media.RenderingEventArgs.RenderingTime%2A> property that you can use to obtain the current frame's rendering time.</span></span>  
  
 <span data-ttu-id="8ed7a-214">有关详细信息，请参阅 <xref:System.Windows.Media.CompositionTarget.Rendering> 页。</span><span class="sxs-lookup"><span data-stu-id="8ed7a-214">For more information, see the <xref:System.Windows.Media.CompositionTarget.Rendering> page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8ed7a-215">请参阅</span><span class="sxs-lookup"><span data-stu-id="8ed7a-215">See also</span></span>

- [<span data-ttu-id="8ed7a-216">动画概述</span><span class="sxs-lookup"><span data-stu-id="8ed7a-216">Animation Overview</span></span>](animation-overview.md)
- [<span data-ttu-id="8ed7a-217">演示图板概述</span><span class="sxs-lookup"><span data-stu-id="8ed7a-217">Storyboards Overview</span></span>](storyboards-overview.md)
- [<span data-ttu-id="8ed7a-218">动画和计时系统概述</span><span class="sxs-lookup"><span data-stu-id="8ed7a-218">Animation and Timing System Overview</span></span>](animation-and-timing-system-overview.md)
- [<span data-ttu-id="8ed7a-219">依赖项属性概述</span><span class="sxs-lookup"><span data-stu-id="8ed7a-219">Dependency Properties Overview</span></span>](../advanced/dependency-properties-overview.md)
