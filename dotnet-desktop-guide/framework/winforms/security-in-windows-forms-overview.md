---
title: 安全概述
ms.date: 03/30/2017
ms.topic: overview
helpviewer_keywords:
- code access security [Windows Forms], Windows Forms
- permissions [Windows Forms], Windows Forms
- Windows Forms, security
- security [Windows Forms], about security
- access control [Windows Forms], Windows Forms
ms.assetid: 4810dc9f-ea23-4ce1-8ea1-657f0ff1d820
ms.openlocfilehash: 6af75433670665392423650a4860d3f1690168aa
ms.sourcegitcommit: 9f6df084c53a3da0ea657ed0d708a72213683084
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/09/2020
ms.locfileid: "96973301"
---
# <a name="security-in-windows-forms-overview"></a><span data-ttu-id="9ba92-102">Windows 窗体中的安全性概述</span><span class="sxs-lookup"><span data-stu-id="9ba92-102">Security in Windows Forms Overview</span></span>

<span data-ttu-id="9ba92-103">在 .NET Framework 发布之前，用户计算机上运行的所有代码都具有相同的权限，可以访问计算机用户所拥有的资源。</span><span class="sxs-lookup"><span data-stu-id="9ba92-103">Before the release of the .NET Framework, all code running on a user's computer had the same rights or permissions to access resources that a user of the computer had.</span></span> <span data-ttu-id="9ba92-104">例如，如果允许用户访问文件系统，则会允许代码访问文件系统；如果允许用户访问数据库，则会允许代码访问数据库。</span><span class="sxs-lookup"><span data-stu-id="9ba92-104">For example, if the user was allowed to access the file system, the code was allowed to access the file system; if the user was allowed to access a database, the code was allowed to access that database.</span></span> <span data-ttu-id="9ba92-105">尽管这些权利或权限对用户显式安装在本地计算机上的可执行文件中的代码来说是可接受的，但对来自 Internet 或本地 Intranet 的恶意代码来说可能是不可接受的。</span><span class="sxs-lookup"><span data-stu-id="9ba92-105">Although these rights or permissions may be acceptable for code in executables that the user has explicitly installed on the local computer, they may not be acceptable for potentially malicious code coming from the Internet or a local Intranet.</span></span> <span data-ttu-id="9ba92-106">此代码没有权限时应不能访问用户的计算机资源。</span><span class="sxs-lookup"><span data-stu-id="9ba92-106">This code should not be able to access the user's computer resources without permission.</span></span>

<span data-ttu-id="9ba92-107">.NET Framework 引入了一个称为代码访问安全性的基础结构，该基础结构使你可以区分代码对该用户拥有的权限的权限或权限。</span><span class="sxs-lookup"><span data-stu-id="9ba92-107">The .NET Framework introduces an infrastructure called Code Access Security that lets you differentiate the permissions, or rights, that code has from the rights that the user has.</span></span> <span data-ttu-id="9ba92-108">默认情况下，来自 Internet 和 Intranet 的代码仅能在所谓的部分信任模式下运行。</span><span class="sxs-lookup"><span data-stu-id="9ba92-108">By default, code coming from the Internet and the Intranet can only run in what is known as partial trust.</span></span> <span data-ttu-id="9ba92-109">部分信任使应用程序受一系列限制的约束：此外，应用程序被限制访问本地硬盘，且无法运行非托管代码。</span><span class="sxs-lookup"><span data-stu-id="9ba92-109">Partial trust subjects an application to a series of restrictions: among other things, an application is restricted from accessing the local hard disk, and cannot run unmanaged code.</span></span> <span data-ttu-id="9ba92-110">.NET Framework 根据代码的标识控制允许代码访问的资源：它来自何处、是否有具有 [强名称的程序集](/dotnet/standard/assembly/strong-name)、是否已使用证书签名等。</span><span class="sxs-lookup"><span data-stu-id="9ba92-110">The .NET Framework controls the resources that code is allowed to access based on the identity of that code: where it came from, whether it has a [Strong-Named Assemblies](/dotnet/standard/assembly/strong-name), whether it is signed with a certificate, and so on.</span></span>

<span data-ttu-id="9ba92-111">ClickOnce 技术，可用于部署 Windows 窗体应用程序，有助于让你更轻松地开发在部分信任、完全信任或具有提升权限的部分信任环境中运行的应用程序。</span><span class="sxs-lookup"><span data-stu-id="9ba92-111">ClickOnce technology, which you use to deploy Windows Forms applications, helps make it easier for you to develop applications that run in partial trust, in full trust, or in partial trust with elevated permissions.</span></span> <span data-ttu-id="9ba92-112">ClickOnce 提供权限提升和受信任的应用程序部署等功能，以便您的应用程序能够以一种有责任的方式从本地用户请求完全信任或提升的权限。</span><span class="sxs-lookup"><span data-stu-id="9ba92-112">ClickOnce provides features such as Permission Elevation and Trusted Application Deployment so that your application can request full trust or elevated permissions from the local user in a responsible manner.</span></span>

## <a name="understanding-security-in-the-net-framework"></a><span data-ttu-id="9ba92-113">了解 .NET Framework 中的安全性</span><span class="sxs-lookup"><span data-stu-id="9ba92-113">Understanding Security in the .NET Framework</span></span>

<span data-ttu-id="9ba92-114">代码访问安全性根据代码源以及代码标识的其他方面，使代码可以获得不同等级的受信度。</span><span class="sxs-lookup"><span data-stu-id="9ba92-114">Code access security allows code to be trusted to varying degrees, depending on where the code originates and on other aspects of the code's identity.</span></span> <span data-ttu-id="9ba92-115">若要深入了解公共语言运行时用于确定安全策略的证据，请参阅[证据](/previous-versions/dotnet/netframework-4.0/7y5x1hcd(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9ba92-115">For more information about the evidence the common language runtime uses to determine security policy, see [Evidence](/previous-versions/dotnet/netframework-4.0/7y5x1hcd(v=vs.100)).</span></span> <span data-ttu-id="9ba92-116">它有助于保护计算机系统不受恶意代码危害，并帮助防止受信任的代码有意或无意地折损安全性。</span><span class="sxs-lookup"><span data-stu-id="9ba92-116">It helps protect computer systems from malicious code and helps protect trusted code from intentionally or accidentally compromising security.</span></span> <span data-ttu-id="9ba92-117">代码访问安全性还可让你更好地控制应用程序所能执行的操作，因为你可以指定你需要应用程序拥有的哪些权限。</span><span class="sxs-lookup"><span data-stu-id="9ba92-117">Code access security also gives you more control over what actions your application can perform, because you can specify only those permissions you need your application to have.</span></span> <span data-ttu-id="9ba92-118">代码访问安全性会影响面向公共语言运行时的所有托管代码，即使该代码不执行单个代码访问安全性权限检查。</span><span class="sxs-lookup"><span data-stu-id="9ba92-118">Code access security affects all managed code that targets the common language runtime, even if that code does not make a single code-access-security permission check.</span></span> <span data-ttu-id="9ba92-119">有关 .NET Framework 中的安全性的详细信息，请参阅 [重要的安全性概念](/dotnet/standard/security/key-security-concepts) 和 [代码访问安全性基础知识](/dotnet/framework/misc/code-access-security-basics)。</span><span class="sxs-lookup"><span data-stu-id="9ba92-119">For more information about security in the .NET Framework, see [Key Security Concepts](/dotnet/standard/security/key-security-concepts) and [Code Access Security Basics](/dotnet/framework/misc/code-access-security-basics).</span></span>

<span data-ttu-id="9ba92-120">如果用户直接运行 Web 服务器或文件共享的 Windows 窗体可执行文件，则授予应用程序的信任度取决于代码所在的位置和启动方式。</span><span class="sxs-lookup"><span data-stu-id="9ba92-120">If the user run a Windows Forms executable file directly off of a Web server or a file share, the degree of trust granted to your application depends on where the code resides, and how it is started.</span></span> <span data-ttu-id="9ba92-121">当应用程序运行时，它将自动进行计算，并从公共语言运行时接收一个命名的权限集。</span><span class="sxs-lookup"><span data-stu-id="9ba92-121">When an application runs, it is automatically evaluated and it receives a named permission set from the common language runtime.</span></span> <span data-ttu-id="9ba92-122">默认情况下，来自本地计算机的代码会被授予完全信任权限集，来自本地网络中的代码被授予本地 Intranet 权限集，而来自 Internet 的代码被授予 Internet 权限集。</span><span class="sxs-lookup"><span data-stu-id="9ba92-122">By default, the code from the local computer is granted the Full Trust permission set, code from a local network is granted the Local Intranet permission set, and code from the Internet is granted the Internet permission set.</span></span>

> [!NOTE]
> <span data-ttu-id="9ba92-123">在 .NET Framework 版本 1.0 Service Pack 1 和 Service Pack 2 中，Internet 区域代码组接收 Nothing 权限集。</span><span class="sxs-lookup"><span data-stu-id="9ba92-123">In the .NET Framework version 1.0 Service Pack 1 and Service Pack 2, the Internet zone code group receives the Nothing permission set.</span></span> <span data-ttu-id="9ba92-124">在所有其他版本的 .NET Framework 中，Internet 区域代码组接收 Internet 权限集。</span><span class="sxs-lookup"><span data-stu-id="9ba92-124">In all other releases of the .NET Framework, the Internet zone code group receives the Internet permissions set.</span></span>
>
> <span data-ttu-id="9ba92-125">每个这些权限集中授予的默认权限都列在[默认安全策略](/previous-versions/dotnet/netframework-4.0/03kwzyfc(v=vs.100))主题中。</span><span class="sxs-lookup"><span data-stu-id="9ba92-125">The default permissions granted in each of these permission sets are listed in the [Default Security Policy](/previous-versions/dotnet/netframework-4.0/03kwzyfc(v=vs.100)) topic.</span></span> <span data-ttu-id="9ba92-126">根据应用程序接收的权限，它会正确运行或者生成安全性异常。</span><span class="sxs-lookup"><span data-stu-id="9ba92-126">Depending on the permissions that the application receives, it either runs correctly or generates a security exception.</span></span>
>
> <span data-ttu-id="9ba92-127">将使用 ClickOnce 部署许多 Windows 窗体应用程序。</span><span class="sxs-lookup"><span data-stu-id="9ba92-127">Many Windows Forms applications will be deployed using ClickOnce.</span></span> <span data-ttu-id="9ba92-128">用于生成 ClickOnce 部署的工具的安全性默认值与前面讨论的不同。</span><span class="sxs-lookup"><span data-stu-id="9ba92-128">The tools used for generating a ClickOnce deployment have different security defaults than what was discussed earlier.</span></span> <span data-ttu-id="9ba92-129">有关详细信息，请参阅下列讨论。</span><span class="sxs-lookup"><span data-stu-id="9ba92-129">For more information, see the following discussion.</span></span>

<span data-ttu-id="9ba92-130">授予给应用程序的实际权限可能不同于默认值，原因是可以修改安全策略；这意味着你的应用程序可以在一台计算机上拥有权限，但不能在另一台上也拥有权限。</span><span class="sxs-lookup"><span data-stu-id="9ba92-130">The actual permissions granted to your application can be different from the default values, because the security policy can be modified; this means that your application can have permission on one computer, but not on another.</span></span>

## <a name="developing-a-more-secure-windows-forms-application"></a><span data-ttu-id="9ba92-131">开发更安全的 Windows 窗体应用程序</span><span class="sxs-lookup"><span data-stu-id="9ba92-131">Developing a More Secure Windows Forms Application</span></span>

<span data-ttu-id="9ba92-132">安全性在应用程序开发的每个步骤中都非常重要。</span><span class="sxs-lookup"><span data-stu-id="9ba92-132">Security is important in all steps of application development.</span></span> <span data-ttu-id="9ba92-133">通过查看并遵循[安全编码准则](/dotnet/standard/security/secure-coding-guidelines)开始。</span><span class="sxs-lookup"><span data-stu-id="9ba92-133">Start by reviewing and following the [Secure Coding Guidelines](/dotnet/standard/security/secure-coding-guidelines).</span></span>

<span data-ttu-id="9ba92-134">下一步，决定你的应用程序是否必须在完全信任环境中运行或是否应在部分信任环境中运行。</span><span class="sxs-lookup"><span data-stu-id="9ba92-134">Next, decide whether your application must run in full trust, or whether it should run in partial trust.</span></span> <span data-ttu-id="9ba92-135">在完全信任环境中运行应用程序能更轻松地访问本地计算机上的资源，但如果不严格根据安全编码指南主题来开发和设计应用程序，会使你的应用程序和其用户暴露在高安全性风险中。</span><span class="sxs-lookup"><span data-stu-id="9ba92-135">Running your application in full trust makes it easier to access resources on the local computer, but exposes your application and its users to high security risks if you do not design and develop your application strictly according to the Secure Coding Guidelines topic.</span></span> <span data-ttu-id="9ba92-136">在部分信任环境中运行应用程序能更轻松地开发更安全的应用程序并减少很多风险，但就如何实现某些功能方面需要进行更多规划。</span><span class="sxs-lookup"><span data-stu-id="9ba92-136">Running your application in partial trust makes it easier to develop a more secure application and reduces much risk, but requires more planning in how to implement certain features.</span></span>

<span data-ttu-id="9ba92-137">如果选择部分信任环境（即，Internet 或本地 Intranet 权限集），则要决定应用程序在此环境中的工作方式。</span><span class="sxs-lookup"><span data-stu-id="9ba92-137">If you choose partial trust (that is, either the Internet or Local Intranet permission sets), decide how you want your application to behave in this environment.</span></span> <span data-ttu-id="9ba92-138">Windows 窗体在不完全受信任的环境中提供了其他更安全的方式来实现功能。</span><span class="sxs-lookup"><span data-stu-id="9ba92-138">Windows Forms provides alternative, more secure ways to implement features when in a semi-trusted environment.</span></span> <span data-ttu-id="9ba92-139">可以同时为部分信任和完全信任环境设计并以不同的方式编写应用程序的某些部分，如数据访问。</span><span class="sxs-lookup"><span data-stu-id="9ba92-139">Certain parts of your application, such as data access, can be designed and written differently for both partial trust and full trust environments.</span></span> <span data-ttu-id="9ba92-140">一些 Windows 窗体功能的目的在于在部分信任环境中工作，如应用程序设置。</span><span class="sxs-lookup"><span data-stu-id="9ba92-140">Some Windows Forms features, such as application settings, are designed to work in partial trust.</span></span> <span data-ttu-id="9ba92-141">有关详细信息，请参阅[应用程序设置概述](./advanced/application-settings-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="9ba92-141">For more information, see [Application Settings Overview](./advanced/application-settings-overview.md).</span></span>

<span data-ttu-id="9ba92-142">如果你的应用程序需要比部分信任所允许的更多的权限，但你不想在完全信任环境中运行，你可以在部分信任环境中运行的同时仅断言那些你需要的额外权限。</span><span class="sxs-lookup"><span data-stu-id="9ba92-142">If your application needs more permissions than partial trust allows, but you do not want to run in full trust, you can run in partial trust while asserting only those additional permissions you need.</span></span> <span data-ttu-id="9ba92-143">例如，如果你想要在部分信任环境中运行，但必须授予应用程序对用户文件系统上的目录的只读访问权限，则你仅可针对该目录请求 <xref:System.Security.Permissions.FileIOPermission>。</span><span class="sxs-lookup"><span data-stu-id="9ba92-143">For example, if you want to run in partial trust, but must grant your application read-only access to a directory on the user's file system, you can request <xref:System.Security.Permissions.FileIOPermission> only for that directory.</span></span> <span data-ttu-id="9ba92-144">正确使用此方法可以增强应用程序的功能，并将用户的安全风险降至最低。</span><span class="sxs-lookup"><span data-stu-id="9ba92-144">Used correctly, this approach can give your application increased functionality and minimize security risks to your users.</span></span>

<span data-ttu-id="9ba92-145">开发将在部分信任环境中运行的应用程序时，对应用程序必须运行什么权限以及应用程序可以选择使用什么权限进行跟踪。</span><span class="sxs-lookup"><span data-stu-id="9ba92-145">When you develop an application that will run in partial trust, keep track of what permissions your application must run and what permissions your application could optionally use.</span></span> <span data-ttu-id="9ba92-146">当所有权限都已知时，你应在应用程序级别提出声明性的权限请求。</span><span class="sxs-lookup"><span data-stu-id="9ba92-146">When all the permissions are known, you should make a declarative request for permission at the application level.</span></span> <span data-ttu-id="9ba92-147">请求权限会通知 .NET Framework 运行应用程序所需的权限以及它具体不需要的权限。</span><span class="sxs-lookup"><span data-stu-id="9ba92-147">Requesting permissions informs the .NET Framework run time about which permissions your application needs and which permissions it specifically does not want.</span></span> <span data-ttu-id="9ba92-148">有关请求权限的详细信息，请参阅[请求权限](/previous-versions/dotnet/netframework-4.0/yd267cce(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9ba92-148">For more information about requesting permissions, see [Requesting Permissions](/previous-versions/dotnet/netframework-4.0/yd267cce(v=vs.100)).</span></span>

<span data-ttu-id="9ba92-149">当请求可选的权限时，如果应用程序执行一个操作，但未获得执行该操作所需的权限时会生成安全性异常，这时必须处理此安全性异常。</span><span class="sxs-lookup"><span data-stu-id="9ba92-149">When you request optional permissions, you must handle security exceptions that will be generated if your application performs an action that requires permissions not granted to it.</span></span> <span data-ttu-id="9ba92-150">适当地处理 <xref:System.Security.SecurityException> 将确保你的应用程序可以继续运行。</span><span class="sxs-lookup"><span data-stu-id="9ba92-150">Appropriate handling of the <xref:System.Security.SecurityException> will ensure that your application can continue to operate.</span></span> <span data-ttu-id="9ba92-151">你的应用程序可以使用异常来确定是否应对用户禁用一项功能。</span><span class="sxs-lookup"><span data-stu-id="9ba92-151">Your application can use the exception to determine whether a feature should become disabled for the user.</span></span> <span data-ttu-id="9ba92-152">例如，如果未授予所需的文件权限，应用程序可以禁用“保存”菜单选项。</span><span class="sxs-lookup"><span data-stu-id="9ba92-152">For example, an application can disable the **Save** menu option if the required file permission is not granted.</span></span>

<span data-ttu-id="9ba92-153">有时，很难知道你是否已断言所有适当的权限。</span><span class="sxs-lookup"><span data-stu-id="9ba92-153">Sometimes, it is difficult to know if you have asserted all the appropriate permissions.</span></span> <span data-ttu-id="9ba92-154">例如，看似无关紧要的方法调用可能在其执行期间的某个点上访问文件系统。</span><span class="sxs-lookup"><span data-stu-id="9ba92-154">A method call which looks innocuous on the surface, for example, may access the file system at some point during its execution.</span></span> <span data-ttu-id="9ba92-155">如果未给应用程序部署所有所需的权限，它可能在桌面上调试时测试结果为正常，但在部署时失败。</span><span class="sxs-lookup"><span data-stu-id="9ba92-155">If you do not deploy your application with all the required permissions, it may test fine when you debug it on your desktop, but fail when deployed.</span></span> <span data-ttu-id="9ba92-156">.NET Framework 2.0 SDK 和 Visual Studio 2005 都包含用于计算应用程序所需权限的工具：分别是 MT.exe 命令行工具和 Visual Studio 的 "计算权限" 功能。</span><span class="sxs-lookup"><span data-stu-id="9ba92-156">Both the .NET Framework 2.0 SDK and Visual Studio 2005 contain tools for calculating the permissions an application needs: the MT.exe command line tool and the Calculate Permissions feature of Visual Studio, respectively.</span></span>

<span data-ttu-id="9ba92-157">以下主题介绍其他 Windows 窗体安全功能。</span><span class="sxs-lookup"><span data-stu-id="9ba92-157">The following topics describe additional Windows Forms security features.</span></span>

|<span data-ttu-id="9ba92-158">主题</span><span class="sxs-lookup"><span data-stu-id="9ba92-158">Topic</span></span>|<span data-ttu-id="9ba92-159">描述</span><span class="sxs-lookup"><span data-stu-id="9ba92-159">Description</span></span>|
|-----------|-----------------|
|<span data-ttu-id="9ba92-160">- [Windows 窗体中的更安全的文件和数据访问](more-secure-file-and-data-access-in-windows-forms.md)</span><span class="sxs-lookup"><span data-stu-id="9ba92-160">- [More Secure File and Data Access in Windows Forms](more-secure-file-and-data-access-in-windows-forms.md)</span></span>|<span data-ttu-id="9ba92-161">介绍如何访问部分信任环境中的文件和数据。</span><span class="sxs-lookup"><span data-stu-id="9ba92-161">Describes how to access files and data in a partial trust environment.</span></span>|
|<span data-ttu-id="9ba92-162">- [Windows 窗体中的更安全的打印](more-secure-printing-in-windows-forms.md)</span><span class="sxs-lookup"><span data-stu-id="9ba92-162">- [More Secure Printing in Windows Forms](more-secure-printing-in-windows-forms.md)</span></span>|<span data-ttu-id="9ba92-163">介绍如何访问部分信任环境中的打印功能。</span><span class="sxs-lookup"><span data-stu-id="9ba92-163">Describes how to access printing features in a partial trust environment.</span></span>|
|<span data-ttu-id="9ba92-164">- [Windows 窗体中的其他安全注意事项](additional-security-considerations-in-windows-forms.md)</span><span class="sxs-lookup"><span data-stu-id="9ba92-164">- [Additional Security Considerations in Windows Forms](additional-security-considerations-in-windows-forms.md)</span></span>|<span data-ttu-id="9ba92-165">介绍在部分信任环境中执行窗口操作、使用“剪贴板”以及调用非托管代码。</span><span class="sxs-lookup"><span data-stu-id="9ba92-165">Describes performing window manipulation, using the Clipboard, and making calls to unmanaged code in a partial trust environment.</span></span>|

### <a name="deploying-an-application-with-the-appropriate-permissions"></a><span data-ttu-id="9ba92-166">用适当的权限部署应用程序</span><span class="sxs-lookup"><span data-stu-id="9ba92-166">Deploying an Application with the Appropriate Permissions</span></span>

<span data-ttu-id="9ba92-167">将 Windows 窗体应用程序部署到客户端计算机的最常见方法是使用 ClickOnce，它是一种用于描述应用程序运行所需的所有组件的部署技术。</span><span class="sxs-lookup"><span data-stu-id="9ba92-167">The most common means of deploying a Windows Forms application to a client computer is with ClickOnce, a deployment technology that describes all of the components your application needs to run.</span></span> <span data-ttu-id="9ba92-168">ClickOnce 使用称为清单的 XML 文件来描述组成应用程序的程序集和文件，以及应用程序所需的权限。</span><span class="sxs-lookup"><span data-stu-id="9ba92-168">ClickOnce uses XML files called manifests to describe the assemblies and files that make up your application, and also the permissions your application requires.</span></span>

<span data-ttu-id="9ba92-169">ClickOnce 提供两种技术，用于在客户端计算机上请求提升的权限。</span><span class="sxs-lookup"><span data-stu-id="9ba92-169">ClickOnce has two technologies for requesting elevated permissions on a client computer.</span></span> <span data-ttu-id="9ba92-170">两种技术都依赖于验证码证书的使用。</span><span class="sxs-lookup"><span data-stu-id="9ba92-170">Both technologies rely on the use of Authenticode certificates.</span></span> <span data-ttu-id="9ba92-171">该证书有助于为你的用户提供一些保证，保证应用程序来自受信任的源。</span><span class="sxs-lookup"><span data-stu-id="9ba92-171">The certificates help provide some assurance to your users that the application has come from a trusted source.</span></span>

<span data-ttu-id="9ba92-172">下表对这些技术进行了介绍。</span><span class="sxs-lookup"><span data-stu-id="9ba92-172">The following table describes these technologies.</span></span>

|<span data-ttu-id="9ba92-173">提升的权限技术</span><span class="sxs-lookup"><span data-stu-id="9ba92-173">Elevated permission technology</span></span>|<span data-ttu-id="9ba92-174">描述</span><span class="sxs-lookup"><span data-stu-id="9ba92-174">Description</span></span>|
|------------------------------------|-----------------|
|<span data-ttu-id="9ba92-175">权限提升</span><span class="sxs-lookup"><span data-stu-id="9ba92-175">Permission Elevation</span></span>|<span data-ttu-id="9ba92-176">应用程序第一次运行时将以“安全性”对话框来提示用户。</span><span class="sxs-lookup"><span data-stu-id="9ba92-176">Prompts the user with a security dialog box the first time your application runs.</span></span> <span data-ttu-id="9ba92-177">“权限提升”对话框告知用户应用程序的发布者，使用户能在知情的情况下决定是否向其授予其他信任</span><span class="sxs-lookup"><span data-stu-id="9ba92-177">The **Permission Elevation** dialog box informs the user about who published the application, so that the user can make an informed decision about whether to grant it additional trust</span></span>|
|<span data-ttu-id="9ba92-178">受信任的应用程序部署</span><span class="sxs-lookup"><span data-stu-id="9ba92-178">Trusted Application Deployment</span></span>|<span data-ttu-id="9ba92-179">涉及到系统管理员在客户端计算机上执行发布者验证码证书的一次性安装。</span><span class="sxs-lookup"><span data-stu-id="9ba92-179">Involves a system administrator performing a one-time installation of a publisher's Authenticode certificate on a client computer.</span></span> <span data-ttu-id="9ba92-180">从那一刻起，任何使用该证书签名的应用程序都视为受信任，可以在没有其他提示的情况下在本地计算机上以完全信任模式运行。</span><span class="sxs-lookup"><span data-stu-id="9ba92-180">From that point on, any applications signed with the certificate are regarded as trusted, and can run at full trust on the local computer without additional prompting.</span></span>|

<span data-ttu-id="9ba92-181">选择哪种技术将取决于你的部署环境。</span><span class="sxs-lookup"><span data-stu-id="9ba92-181">Which technology you choose will depend on your deployment environment.</span></span> <span data-ttu-id="9ba92-182">有关详细信息，请参阅[选择 ClickOnce 部署策略](/visualstudio/deployment/choosing-a-clickonce-deployment-strategy)。</span><span class="sxs-lookup"><span data-stu-id="9ba92-182">For more information, see [Choosing a ClickOnce Deployment Strategy](/visualstudio/deployment/choosing-a-clickonce-deployment-strategy).</span></span>

<span data-ttu-id="9ba92-183">默认情况下，使用 Visual Studio 或 .NET Framework SDK 工具 ( # A0 和 MageUI.exe) 部署的 ClickOnce 应用程序配置为在具有完全信任的客户端计算机上运行。</span><span class="sxs-lookup"><span data-stu-id="9ba92-183">By default, ClickOnce applications deployed using either Visual Studio or the .NET Framework SDK tools (Mage.exe and MageUI.exe) are configured to run on a client computer that has Full Trust.</span></span> <span data-ttu-id="9ba92-184">如果你正在使用部分信任或仅使用某些其他权限部署应用程序，则必须更改此默认设置。</span><span class="sxs-lookup"><span data-stu-id="9ba92-184">If you are deploying your application by using partial trust or by using only some additional permissions, you will have to change this default.</span></span> <span data-ttu-id="9ba92-185">在配置部署时，可以通过 Visual Studio 或 .NET Framework SDK 工具 MageUI.exe 完成此操作。</span><span class="sxs-lookup"><span data-stu-id="9ba92-185">You can do this with either Visual Studio or the .NET Framework SDK tool MageUI.exe when you configure your deployment.</span></span> <span data-ttu-id="9ba92-186">有关如何使用 MageUI.exe 的详细信息，请参阅 [演练：手动部署 ClickOnce 应用程序](/visualstudio/deployment/walkthrough-manually-deploying-a-clickonce-application)。</span><span class="sxs-lookup"><span data-stu-id="9ba92-186">For more information about how to use MageUI.exe, see [Walkthrough: Manually deploying a ClickOnce application](/visualstudio/deployment/walkthrough-manually-deploying-a-clickonce-application).</span></span>  <span data-ttu-id="9ba92-187">另请参阅[如何：设置 ClickOnce 应用程序的自定义权限](/previous-versions/visualstudio/visual-studio-2012/hafybdaa(v=vs.110))或[如何：设置 ClickOnce 应用程序的自定义权限](/visualstudio/deployment/how-to-set-custom-permissions-for-a-clickonce-application)。</span><span class="sxs-lookup"><span data-stu-id="9ba92-187">Also see [How to: Set Custom Permissions for a ClickOnce Application](/previous-versions/visualstudio/visual-studio-2012/hafybdaa(v=vs.110)) or [How to: Set Custom Permissions for a ClickOnce Application](/visualstudio/deployment/how-to-set-custom-permissions-for-a-clickonce-application).</span></span>

<span data-ttu-id="9ba92-188">有关 ClickOnce 和权限提升的安全方面的详细信息，请参阅 [保护 Clickonce 应用程序](/visualstudio/deployment/securing-clickonce-applications)。</span><span class="sxs-lookup"><span data-stu-id="9ba92-188">For more information about the security aspects of ClickOnce and Permission Elevation, see [Securing ClickOnce Applications](/visualstudio/deployment/securing-clickonce-applications).</span></span> <span data-ttu-id="9ba92-189">若要深入了解受信任的应用程序部署，请参阅[受信任的应用程序部署概述](/visualstudio/deployment/trusted-application-deployment-overview)。</span><span class="sxs-lookup"><span data-stu-id="9ba92-189">For more information about Trusted Application Deployment, see [Trusted Application Deployment Overview](/visualstudio/deployment/trusted-application-deployment-overview).</span></span>

### <a name="testing-the-application"></a><span data-ttu-id="9ba92-190">测试应用程序</span><span class="sxs-lookup"><span data-stu-id="9ba92-190">Testing the Application</span></span>

<span data-ttu-id="9ba92-191">如果已使用 Visual Studio 部署了 Windows 窗体应用程序，则可以在部分信任或开发环境中启用受限的权限集的调试。</span><span class="sxs-lookup"><span data-stu-id="9ba92-191">If you have deployed your Windows Forms application by using Visual Studio, you can enable debugging in partial trust or a restricted permission set from the development environment.</span></span>  <span data-ttu-id="9ba92-192">另请参阅 [如何：使用受限权限调试 ClickOnce 应用程序](/visualstudio/deployment/how-to-debug-a-clickonce-application-with-restricted-permissions)。</span><span class="sxs-lookup"><span data-stu-id="9ba92-192">Also see [How to: Debug a ClickOnce Application with Restricted Permissions](/visualstudio/deployment/how-to-debug-a-clickonce-application-with-restricted-permissions).</span></span>

## <a name="see-also"></a><span data-ttu-id="9ba92-193">另请参阅</span><span class="sxs-lookup"><span data-stu-id="9ba92-193">See also</span></span>

- [<span data-ttu-id="9ba92-194">Windows 窗体安全</span><span class="sxs-lookup"><span data-stu-id="9ba92-194">Windows Forms Security</span></span>](windows-forms-security.md)
- [<span data-ttu-id="9ba92-195">代码访问安全性基础知识</span><span class="sxs-lookup"><span data-stu-id="9ba92-195">Code Access Security Basics</span></span>](/dotnet/framework/misc/code-access-security-basics)
- [<span data-ttu-id="9ba92-196">ClickOnce 安全和部署</span><span class="sxs-lookup"><span data-stu-id="9ba92-196">ClickOnce Security and Deployment</span></span>](/visualstudio/deployment/clickonce-security-and-deployment)
- [<span data-ttu-id="9ba92-197">受信任的应用程序部署概述</span><span class="sxs-lookup"><span data-stu-id="9ba92-197">Trusted Application Deployment Overview</span></span>](/visualstudio/deployment/trusted-application-deployment-overview)
- [<span data-ttu-id="9ba92-198">Mage.exe（清单生成和编辑工具）</span><span class="sxs-lookup"><span data-stu-id="9ba92-198">Mage.exe (Manifest Generation and Editing Tool)</span></span>](/dotnet/framework/tools/mage-exe-manifest-generation-and-editing-tool)
- [<span data-ttu-id="9ba92-199">MageUI.exe（图形化客户端中的清单生成和编辑工具）</span><span class="sxs-lookup"><span data-stu-id="9ba92-199">MageUI.exe (Manifest Generation and Editing Tool, Graphical Client)</span></span>](/dotnet/framework/tools/mageui-exe-manifest-generation-and-editing-tool-graphical-client)
