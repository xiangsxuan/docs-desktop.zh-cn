---
title: DataGridView 控件中的数据显示模式
ms.date: 03/30/2017
helpviewer_keywords:
- data [Windows Forms], display modes
- data grids [Windows Forms], display modes
- DataGridView control [Windows Forms], display modes
ms.assetid: 9755a030-3f3f-4705-a661-ba5a48a81875
ms.openlocfilehash: ad6be647e3a36904b055fd6771f539df28938fab
ms.sourcegitcommit: 9f6df084c53a3da0ea657ed0d708a72213683084
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/09/2020
ms.locfileid: "96970140"
---
# <a name="data-display-modes-in-the-windows-forms-datagridview-control"></a><span data-ttu-id="6e9ee-102">Windows 窗体 DataGridView 控件中的数据显示模式</span><span class="sxs-lookup"><span data-stu-id="6e9ee-102">Data Display Modes in the Windows Forms DataGridView Control</span></span>
<span data-ttu-id="6e9ee-103"><xref:System.Windows.Forms.DataGridView>控件可以在三种不同模式下显示数据：绑定、未绑定和虚拟。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-103">The <xref:System.Windows.Forms.DataGridView> control can display data in three distinct modes: bound, unbound, and virtual.</span></span> <span data-ttu-id="6e9ee-104">根据要求选择最适合的模式。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-104">Choose the most suitable mode based on your requirements.</span></span>  
  
## <a name="unbound"></a><span data-ttu-id="6e9ee-105">未绑定</span><span class="sxs-lookup"><span data-stu-id="6e9ee-105">Unbound</span></span>  
 <span data-ttu-id="6e9ee-106">取消绑定模式适用于显示以编程方式管理的相对较少的数据量。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-106">Unbound mode is suitable for displaying relatively small amounts of data that you manage programmatically.</span></span> <span data-ttu-id="6e9ee-107">不要将 <xref:System.Windows.Forms.DataGridView> 控件直接作为绑定模式附加到数据源。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-107">You do not attach the <xref:System.Windows.Forms.DataGridView> control directly to a data source as in bound mode.</span></span> <span data-ttu-id="6e9ee-108">相反，您必须自行填充控件，通常使用 <xref:System.Windows.Forms.DataGridViewRowCollection.Add%2A?displayProperty=nameWithType> 方法。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-108">Instead, you must populate the control yourself, typically by using the <xref:System.Windows.Forms.DataGridViewRowCollection.Add%2A?displayProperty=nameWithType> method.</span></span>  
  
 <span data-ttu-id="6e9ee-109">未绑定模式对于静态、只读数据，或者当你想要提供你自己的与外部数据存储交互的代码时特别有用。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-109">Unbound mode can be particularly useful for static, read-only data, or when you want to provide your own code that interacts with an external data store.</span></span> <span data-ttu-id="6e9ee-110">但是，如果希望用户与外部数据源进行交互，通常会使用绑定模式。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-110">When you want your users to interact with an external data source, however, you will typically use bound mode.</span></span>  
  
 <span data-ttu-id="6e9ee-111">有关使用只读未绑定的示例 <xref:System.Windows.Forms.DataGridView> ，请参阅 [如何：创建未绑定的 Windows 窗体 DataGridView 控件](how-to-create-an-unbound-windows-forms-datagridview-control.md)。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-111">For an example that uses a read-only unbound <xref:System.Windows.Forms.DataGridView>, see [How to: Create an Unbound Windows Forms DataGridView Control](how-to-create-an-unbound-windows-forms-datagridview-control.md).</span></span>  
  
## <a name="bound"></a><span data-ttu-id="6e9ee-112">Bound</span><span class="sxs-lookup"><span data-stu-id="6e9ee-112">Bound</span></span>  
 <span data-ttu-id="6e9ee-113">绑定模式适用于使用与数据存储区的自动交互来管理数据。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-113">Bound mode is suitable for managing data using automatic interaction with the data store.</span></span> <span data-ttu-id="6e9ee-114"><xref:System.Windows.Forms.DataGridView>通过设置属性，可以将控件直接附加到其数据源 <xref:System.Windows.Forms.DataGridView.DataSource%2A> 。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-114">You can attach the <xref:System.Windows.Forms.DataGridView> control directly to its data source by setting the <xref:System.Windows.Forms.DataGridView.DataSource%2A> property.</span></span> <span data-ttu-id="6e9ee-115">当控件被数据绑定时，将推送和拉取数据行，而无需对你的部分进行显式管理。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-115">When the control is data bound, data rows are pushed and pulled without the need of explicit management on your part.</span></span> <span data-ttu-id="6e9ee-116">当 <xref:System.Windows.Forms.DataGridView.AutoGenerateColumns%2A> 属性为时 `true` ，数据源中的每一列都将导致在控件中创建相应的列。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-116">When the <xref:System.Windows.Forms.DataGridView.AutoGenerateColumns%2A> property is `true`, each column in your data source will cause a corresponding column to be created in the control.</span></span> <span data-ttu-id="6e9ee-117">如果你想要创建自己的列，则可以将此属性设置为， `false` 并在 <xref:System.Windows.Forms.DataGridViewColumn.DataPropertyName%2A> 配置每列时使用属性对其进行绑定。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-117">If you prefer to create your own columns, you can set this property to `false` and use the <xref:System.Windows.Forms.DataGridViewColumn.DataPropertyName%2A> property to bind each column when you configure it.</span></span> <span data-ttu-id="6e9ee-118">如果要使用默认情况下生成的类型之外的列类型，则此方法非常有用。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-118">This is useful when you want to use a column type other than the types that are generated by default.</span></span> <span data-ttu-id="6e9ee-119">有关详细信息，请参阅 [Windows 窗体 DataGridView 控件中的列类型](column-types-in-the-windows-forms-datagridview-control.md)。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-119">For more information, see [Column Types in the Windows Forms DataGridView Control](column-types-in-the-windows-forms-datagridview-control.md).</span></span>  
  
 <span data-ttu-id="6e9ee-120">有关使用绑定控件的示例 <xref:System.Windows.Forms.DataGridView> ，请参阅 [演练：验证 Windows 窗体 DataGridView 控件中的数据](walkthrough-validating-data-in-the-windows-forms-datagridview-control.md)。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-120">For an example that uses a bound <xref:System.Windows.Forms.DataGridView> control, see [Walkthrough: Validating Data in the Windows Forms DataGridView Control](walkthrough-validating-data-in-the-windows-forms-datagridview-control.md).</span></span>  
  
 <span data-ttu-id="6e9ee-121">还可以 <xref:System.Windows.Forms.DataGridView> 在绑定模式下向控件添加未绑定的列。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-121">You can also add unbound columns to a <xref:System.Windows.Forms.DataGridView> control in bound mode.</span></span> <span data-ttu-id="6e9ee-122">当您想要显示允许用户对特定行执行操作的按钮或链接列时，这非常有用。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-122">This is useful when you want to display a column of buttons or links that enable users to perform actions on specific rows.</span></span> <span data-ttu-id="6e9ee-123">它还可用于显示包含从绑定列计算的值的列。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-123">It is also useful to display columns with values calculated from bound columns.</span></span> <span data-ttu-id="6e9ee-124">您可以在事件的处理程序中填充计算列的单元值 <xref:System.Windows.Forms.DataGridView.CellFormatting> 。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-124">You can populate the cell values for calculated columns in a handler for the <xref:System.Windows.Forms.DataGridView.CellFormatting> event.</span></span> <span data-ttu-id="6e9ee-125">但是，如果您使用的是 <xref:System.Data.DataSet> 或 <xref:System.Data.DataTable> 作为数据源，则可以改为使用 <xref:System.Data.DataColumn.Expression%2A?displayProperty=nameWithType> 属性创建计算列。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-125">If you are using a <xref:System.Data.DataSet> or <xref:System.Data.DataTable> as the data source, however, you might want to use the <xref:System.Data.DataColumn.Expression%2A?displayProperty=nameWithType> property to create a calculated column instead.</span></span> <span data-ttu-id="6e9ee-126">在这种情况下， <xref:System.Windows.Forms.DataGridView> 控件将像处理数据源中的任何其他列一样处理计算列。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-126">In this case, the <xref:System.Windows.Forms.DataGridView> control will treat calculated column just like any other column in the data source.</span></span>  
  
 <span data-ttu-id="6e9ee-127">不支持在绑定模式下按未绑定列进行排序。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-127">Sorting by unbound columns in bound mode is not supported.</span></span> <span data-ttu-id="6e9ee-128">如果在绑定模式下创建的未绑定列包含用户可编辑的值，则当控件按绑定列进行排序时，必须实现虚拟模式来维护这些值。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-128">If you create an unbound column in bound mode that contains user-editable values, you must implement virtual mode to maintain these values when the control is sorted by a bound column.</span></span>  
  
## <a name="virtual"></a><span data-ttu-id="6e9ee-129">虚拟</span><span class="sxs-lookup"><span data-stu-id="6e9ee-129">Virtual</span></span>  
 <span data-ttu-id="6e9ee-130">在虚拟模式下，你可以实现你自己的数据管理操作。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-130">With virtual mode, you can implement your own data management operations.</span></span> <span data-ttu-id="6e9ee-131">在按绑定列对控件进行排序时，必须使用此方法来维护绑定模式下未绑定列的值。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-131">This is necessary to maintain the values of unbound columns in bound mode when the control is sorted by bound columns.</span></span> <span data-ttu-id="6e9ee-132">不过，虚拟模式的主要用途是在与大量数据进行交互时优化性能。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-132">The primary use of virtual mode, however, is to optimize performance when interacting with large amounts of data.</span></span>  
  
 <span data-ttu-id="6e9ee-133">将该 <xref:System.Windows.Forms.DataGridView> 控件附加到你管理的缓存，你的代码将控制何时推送和拉取数据行。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-133">You attach the <xref:System.Windows.Forms.DataGridView> control to a cache that you manage, and your code controls when data rows are pushed and pulled.</span></span> <span data-ttu-id="6e9ee-134">若要使内存占用量较小，缓存大小应与当前显示的行数大小相似。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-134">To keep the memory footprint small, the cache should be similar in size to the number of rows currently displayed.</span></span> <span data-ttu-id="6e9ee-135">当用户将新行滚动到视图中时，你的代码将请求缓存中的新数据，并选择性地从内存中刷新旧数据。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-135">When the user scrolls new rows into view, your code requests new data from the cache and optionally flushes old data from memory.</span></span>  
  
 <span data-ttu-id="6e9ee-136">在实现虚拟模式时，需要跟踪数据模型中何时需要新行以及何时回滚新行的添加。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-136">When you are implementing virtual mode, you will need to track when a new row is needed in the data model and when to rollback the addition of the new row.</span></span> <span data-ttu-id="6e9ee-137">此功能的确切实现将取决于数据模型的实现和数据模型的事务语义;提交范围是否位于单元或行级别。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-137">The exact implementation of this functionality will depend on the implementation of the data model and the transaction semantics of the data model; whether commit scope is at the cell or row level.</span></span>  
  
 <span data-ttu-id="6e9ee-138">有关虚拟模式的详细信息，请参阅 [Windows 窗体 DataGridView 控件中的虚拟模式](virtual-mode-in-the-windows-forms-datagridview-control.md)。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-138">For more information about virtual mode, see [Virtual Mode in the Windows Forms DataGridView Control](virtual-mode-in-the-windows-forms-datagridview-control.md).</span></span> <span data-ttu-id="6e9ee-139">有关演示如何使用虚拟模式事件的示例，请参阅 [演练：在 Windows 窗体 DataGridView 控件中实现虚拟模式](implementing-virtual-mode-wf-datagridview-control.md)。</span><span class="sxs-lookup"><span data-stu-id="6e9ee-139">For an example that shows how to use virtual mode events, see [Walkthrough: Implementing Virtual Mode in the Windows Forms DataGridView Control](implementing-virtual-mode-wf-datagridview-control.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6e9ee-140">另请参阅</span><span class="sxs-lookup"><span data-stu-id="6e9ee-140">See also</span></span>

- <xref:System.Windows.Forms.DataGridView>
- <xref:System.Windows.Forms.DataGridView.DataSource%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridView.VirtualMode%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.BindingSource>
- <xref:System.Windows.Forms.DataGridViewColumn.DataPropertyName%2A?displayProperty=nameWithType>
- [<span data-ttu-id="6e9ee-141">在 Windows 窗体 DataGridView 控件中显示数据</span><span class="sxs-lookup"><span data-stu-id="6e9ee-141">Displaying Data in the Windows Forms DataGridView Control</span></span>](displaying-data-in-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="6e9ee-142">Windows 窗体 DataGridView 控件中的列类型</span><span class="sxs-lookup"><span data-stu-id="6e9ee-142">Column Types in the Windows Forms DataGridView Control</span></span>](column-types-in-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="6e9ee-143">演练：创建未绑定的 Windows 窗体 DataGridView 控件</span><span class="sxs-lookup"><span data-stu-id="6e9ee-143">Walkthrough: Creating an Unbound Windows Forms DataGridView Control</span></span>](walkthrough-creating-an-unbound-windows-forms-datagridview-control.md)
- [<span data-ttu-id="6e9ee-144">如何：将数据绑定到 Windows 窗体 DataGridView 控件</span><span class="sxs-lookup"><span data-stu-id="6e9ee-144">How to: Bind Data to the Windows Forms DataGridView Control</span></span>](how-to-bind-data-to-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="6e9ee-145">Windows 窗体 DataGridView 控件中的虚拟模式</span><span class="sxs-lookup"><span data-stu-id="6e9ee-145">Virtual Mode in the Windows Forms DataGridView Control</span></span>](virtual-mode-in-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="6e9ee-146">演练：在 Windows 窗体 DataGridView 控件中实现虚拟模式</span><span class="sxs-lookup"><span data-stu-id="6e9ee-146">Walkthrough: Implementing Virtual Mode in the Windows Forms DataGridView Control</span></span>](implementing-virtual-mode-wf-datagridview-control.md)
